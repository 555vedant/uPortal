<?xml version="1.0"?>

<!--
     PersonDirs.xml makes possible a standard way for the uPortal
     framework and its installed channels to refer to particular person
     attributes.  For example, if a channel wants to display a user's
     email address, it will look for an attribute called "mail", which
     appears as an alias in this file.  This alias maps to the actual
     name of the field containing an email address in your data repository.
     If no data repository at your organization contains a user's email
     address then simply don't fill in a <name> corresponding to the "mail"
     alias.  The requesting channel will simply get a null when requesting
     the attribute value of "mail" indicating that this attribute is not
     available.  Providing this level of indirection for attribute references
     makes it possible for organizations to share channels that refer to
     user's attributes.

     The <PersonDirs> element should contain one or more <PersonDirInfo>
     elements.  Each <PersonDirInfo> element represents a source for
     obtaining person attributes and should contain a set of attribute
     alias/name pairs in addition to settings for obtaining the data
     from either
     
       1) LDAP properties
       2) Named LDAP server
       3) JDBC properties
       4) Container-managed JDBC DataSource 

     This means that it is possible to obtain person attributes from more
     than one source.

     If a particular attribute alias is specified more than
     once, the name value obtained from the last occurance of that attribute
     will be used.

     uPortal channels refer to user attributes using standard
     attribute names found in the eduPerson object class. If
     a name is found for an eduPerson attribute name or "alias",
     it will be stuffed into the org.jasig.portal.security.IPerson object.
     See http://www.educause.edu/eduperson/ for an explanation of each
     of these aliases.

     JSR 168 portlets use a different standard to request user attribute names.
     See the Portlet Specification, section PLT.D entitled
     User Information Attribute Names at
     http://www.jcp.org/en/jsr/detail?id=168

     Author: Howard Gilbert, howard.gilbert@yale.edu
     Version $Revision$
-->

<PersonDirs>

    <!-- 
        This PersonDirInfo element maps person attribute aliases to JDBC column names.
        The JDBC resource can be specified in the following two ways:

        1) Specify the database JDBC connection properties. For example,

        <driver>org.hsqldb.jdbcDriver</driver>
        <url>jdbc:hsqldb:hsql://localhost:8887</url>
        <logonid>sa</logonid>
        <logonpassword></logonpassword>

        2) Specify the name of a container-managed JDBC DataSource.  For example,

        <res-ref-name>PersonDb</res-ref-name>

    -->
    <PersonDirInfo>

        <driver>org.hsqldb.jdbcDriver</driver>
        <url>jdbc:hsqldb:hsql://localhost:8887</url>
        <logonid>sa</logonid>
        <logonpassword></logonpassword>

        <uidquery>SELECT FIRST_NAME||' '||LAST_NAME AS FIRST_LAST, FIRST_NAME, LAST_NAME, EMAIL FROM UP_PERSON_DIR WHERE USER_NAME=?</uidquery>
    
        <attributes>

            <attribute><alias>eduPersonAffiliation</alias>        <name></name></attribute>
            <attribute><alias>eduPersonNickname</alias>           <name></name></attribute>
            <attribute><alias>eduPersonOrgDN</alias>              <name></name></attribute>
            <attribute><alias>eduPersonOrgUnitDN</alias>          <name></name></attribute>
            <attribute><alias>eduPersonPrimaryAffiliation</alias> <name></name></attribute>
            <attribute><alias>eduPersonPrincipalName</alias>      <name></name></attribute>
            <attribute><alias>c</alias>                           <name></name></attribute>
            <attribute><alias>cn</alias>                          <name></name></attribute>
            <attribute><alias>description</alias>                 <name></name></attribute>
            <attribute><alias>displayName</alias>                 <name>FIRST_LAST</name></attribute>
            <attribute><alias>facsimileTelephoneNumber</alias>    <name></name></attribute>
            <attribute><alias>givenName</alias>                   <name>FIRST_NAME</name></attribute>
            <attribute><alias>homePhone</alias>                   <name></name></attribute>
            <attribute><alias>homePostalAddress</alias>           <name></name></attribute>
            <attribute><alias>initials</alias>                    <name></name></attribute>
            <attribute><alias>jpegPhoto</alias>                   <name></name></attribute>
            <attribute><alias>l</alias>                           <name></name></attribute>
            <attribute><alias>labeledURI</alias>                  <name></name></attribute>
            <attribute><alias>mail</alias>                        <name>EMAIL</name></attribute>
            <attribute><alias>mobile</alias>                      <name></name></attribute>
            <attribute><alias>o</alias>                           <name></name></attribute>
            <attribute><alias>ou</alias>                          <name></name></attribute>
            <attribute><alias>pager</alias>                       <name></name></attribute>
            <attribute><alias>postalAddress</alias>               <name></name></attribute>
            <attribute><alias>postalCode</alias>                  <name></name></attribute>
            <attribute><alias>postOfficeBox</alias>               <name></name></attribute>
            <attribute><alias>preferredLanguage</alias>           <name></name></attribute>
            <attribute><alias>seeAlso</alias>                     <name></name></attribute>
            <attribute><alias>sn</alias>                          <name>LAST_NAME</name></attribute>
            <attribute><alias>st</alias>                          <name></name></attribute>
            <attribute><alias>street</alias>                      <name></name></attribute>
            <attribute><alias>telephoneNumber</alias>             <name></name></attribute>
            <attribute><alias>uid</alias>                         <name></name></attribute>
            <attribute><alias>userCertificate</alias>             <name></name></attribute>
            <attribute><alias>userSMIMECertificate</alias>        <name></name></attribute>



        </attributes>

    </PersonDirInfo>

    <!-- 
        This PersonDirInfo element maps person attribute aliases to LDAP attribute names.
        The LDAP resource can be specified in the following two ways:

        1) Specify the LDAP connection properties. For example,

        <url>ldap://yu.yale.edu:389/dc=itstp, dc=yale, dc=edu</url>
        <logonid>cn=bogus,cn=Users,dc=itstp,dc=yale,dc=edu</logonid>
        <logonpassword>foobar</logonpassword>

        2) Specify the name of an LDAP server as set up in uPortal's ldap.xml.  For example,
        
        <ldap-ref-name>Main</ldap-ref-name>

    -->
    <!--
    <PersonDirInfo>

        <ldap-ref-name>Main</ldap-ref-name>

        <uidquery>(cn={0})</uidquery>
        <usercontext>cn=Users</usercontext>

        <attributes>

            <attribute><alias>eduPersonAffiliation</alias>        <name>eduPersonAffiliation</name></attribute>
            <attribute><alias>eduPersonNickname</alias>           <name>eduPersonNickname</name></attribute>
            <attribute><alias>eduPersonOrgDN</alias>              <name>eduPersonOrgDN</name></attribute>
            <attribute><alias>eduPersonOrgUnitDN</alias>          <name>eduPersonOrgUnitDN</name></attribute>
            <attribute><alias>eduPersonPrimaryAffiliation</alias> <name>eduPersonPrimaryAffiliation</name></attribute>
            <attribute><alias>eduPersonPrincipalName</alias>      <name>eduPersonPrincipalName</name></attribute>
            <attribute><alias>c</alias>                           <name>c</name></attribute>
            <attribute><alias>cn</alias>                          <name>cn</name></attribute>
            <attribute><alias>description</alias>                 <name>description</name></attribute>
            <attribute><alias>displayName</alias>                 <name>displayName</name></attribute>
            <attribute><alias>facsimileTelephoneNumber</alias>    <name>facsimileTelephoneNumber</name></attribute>
            <attribute><alias>givenName</alias>                   <name>givenName</name></attribute>
            <attribute><alias>homePhone</alias>                   <name>homePhone</name></attribute>
            <attribute><alias>homePostalAddress</alias>           <name>homePostalAddress</name></attribute>
            <attribute><alias>initials</alias>                    <name>initials</name></attribute>
            <attribute><alias>jpegPhoto</alias>                   <name>jpegPhoto</name></attribute>
            <attribute><alias>l</alias>                           <name>l</name></attribute>
            <attribute><alias>labeledURI</alias>                  <name>labeledURI</name></attribute>
            <attribute><alias>mail</alias>                        <name>mail</name></attribute>
            <attribute><alias>mobile</alias>                      <name>mobile</name></attribute>
            <attribute><alias>o</alias>                           <name>o</name></attribute>
            <attribute><alias>ou</alias>                          <name>ou</name></attribute>
            <attribute><alias>pager</alias>                       <name>pager</name></attribute>
            <attribute><alias>postalAddress</alias>               <name>postalAddress</name></attribute>
            <attribute><alias>postalCode</alias>                  <name>postalCode</name></attribute>
            <attribute><alias>postOfficeBox</alias>               <name>postOfficeBox</name></attribute>
            <attribute><alias>preferredLanguage</alias>           <name>preferredLanguage</name></attribute>
            <attribute><alias>seeAlso</alias>                     <name>seeAlso</name></attribute>
            <attribute><alias>sn</alias>                          <name>sn</name></attribute>
            <attribute><alias>st</alias>                          <name>st</name></attribute>
            <attribute><alias>street</alias>                      <name>street</name></attribute>
            <attribute><alias>telephoneNumber</alias>             <name>telephoneNumber</name></attribute>
            <attribute><alias>uid</alias>                         <name>uid</name></attribute>
            <attribute><alias>userCertificate</alias>             <name>userCertificate</name></attribute>
            <attribute><alias>userSMIMECertificate</alias>        <name>userSMIMECertificate</name></attribute>

        </attributes>

    </PersonDirInfo>
    -->

</PersonDirs>
