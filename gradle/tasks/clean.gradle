def props = new Properties()

task loadBuildFile() {
    println "Load the build.properties file"
    def buildPropsFile = new File('build.properties')
    if (buildPropsFile.exists()) {
        buildPropsFile.withInputStream { props.load(it) }
    } else {
        println("WARNING: build.properties not found")
    }
}

task cleanShared(type:Delete) {
   description 'Removes ALL shared libraries from the servlet container.'
   def serverbase = props.getProperty("server.home")
   def libs =  "${serverbase}/shared/lib"
   printf "Configured shared libraries from servlet container at location:  ${libs}"
   FileTree tree = fileTree(dir: libs)
   delete fileTree(dir:libs , include: '*')
}

task cleanTomcat(type:Delete) {
   description 'Removes the deployed uPortal from the servlet container.'
   def serverbase = props.getProperty("server.home")
   def uPortalDeployDir = "${serverbase}/webapps/uPortal"
   printf "Configured deployed uPortal from servlet container at location:  ${uPortalDeployDir}"
   FileTree tree = fileTree(dir: uPortalDeployDir)
   delete uPortalDeployDir
}
