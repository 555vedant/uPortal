<!-- this is an ant build file for the uPortal 2.0 -->

<!-- I've commented some parts that you might want to edit.
	-peter.
-->

     <project name="portal" default="compile" basedir=".">
       <target name="init">
         <tstamp/>
	
<!-- output directory for the compiled classes -->
         <property name="classdir" value="classes" />

<!-- location of the source java files -->
	 <property name="src" value="source" />

<!-- this is a target directory for a webpage to publish the soruces -->
	 <property name="wwwdir" value="/home/bw/public_html/ibs/portal/sources/"/>

<!-- this is a target directory for javadocs -->
	 <property name="javadocdir" value="/home/bw/public_html/ibs/portal/api/" /> 

<!-- CLASSPATH for building the project is defined below. This is very important -->
	 <property name="generalclasspath" value="/usr/local/java/jars/xalan.jar;/usr/local/java/jars/xerces.jar;/usr/local/java/jars/dxml.jar;/usr/local/java/jars/servlet.jar"/>
       </target>

       <target name="prepare" depends="init">
         <mkdir dir="${classdir}" />
       </target>

       <target name="compile" depends="prepare">
         <javac srcdir="${src}" destdir="${classdir}" classpath="${generalclasspath}" />
       </target>

       <target name="dist" depends="compile">
         <mkdir dir="${dist}/lib" />
         <jar jarfile="${dist}/lib/foo${DSTAMP}.jar"
          basedir="${build}" items="com"/>
       </target>

	<target name="www">
	  <mkdir dir="${wwwdir}" />
	  <copydir src="${src}"  dest="${wwwdir}"  includes="**/*.java,**/*.xsl" />
	  <echo message="Changing permissions for ${wwwdir}"/>
	  <exec dir="${wwwdir}/../" command="find -type d -exec chmod a+rx {} \;" output="/dev/null" />
          <chmod src="${wwwdir}" perm="-R a+r" />
	</target>
	
	<target name="javadoc">
	  <mkdir dir="${javadocdir}"/>
	  <javadoc 
	   packagenames="org.jasig.portal,org.jasig.portal.xmlchannels" 
	   sourcepath="${src}"
	   classpath="${generalclasspath}"
           destdir="${javadocdir}"
           author="true"
           version="true"/>
 	  <echo message="Changing permissions for ${javadocdir}"/>
	  <exec dir="${javadocdir}/../" command="find -type d -exec chmod a+rx {} \;" output="/dev/null" />
          <chmod src="${javadocdir}" perm="-R a+r" />
	</target>

       <target name="clean" depends="init">
         <deltree dir="${classdir}" />
	 <deltree dir="${wwwdir}" />
	 <deltree dir="${javadocdir}"/>
       </target>
     </project>


