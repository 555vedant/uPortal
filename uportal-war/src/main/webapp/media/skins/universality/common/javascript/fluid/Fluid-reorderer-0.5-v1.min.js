(function(E){var C="http://www.w3.org/2005/07/aaa";var F=["main","secondary","navigation","banner","contentinfo","statements","note","seealso","search"];var A=new RegExp("^"+F.join("|")+"$");var D=E.browser.mozilla&&(parseFloat(E.browser.version)<1.9);var B=(function(){if(D){return function(I,G,H){if(typeof H!="undefined"){I.each(function(J,K){K.setAttributeNS(C,"aaa:"+G,H)})}else{return I.get(0).getAttributeNS(C,G)}}}else{return function(I,G,H){if(typeof H!="undefined"){I.each(function(J,K){E(K).attr("aria-"+G,H)})}else{return I.attr("aria-"+G)}}}})();E.fn.extend({ariaRole:function(H){var G=this;if(H){H=(A.test(H)||!D)?H:"wairole:"+H;G.each(function(I,J){E(J).attr("role",H)});return G}else{var H=G.eq(0).attr("role");if(H){H=H.replace(/^wairole:/,"")}return H}},ariaState:function(){var G=arguments;var H=this;if(G.length==2){H.each(function(I,J){B(E(J),G[0],G[1])});return H}else{if(typeof G[0]=="string"){return B(H.eq(0),G[0])}else{H.each(function(I,J){E.each(G[0],function(K,L){E(J).ariaState(K,L)})});return H}}}});E.extend(E.expr[":"],{ariaRole:"jQuery(a).ariaRole()==m[3]",ariaState:"jQuery(a).ariaState(m[3].split(/=/)[0])==(/=/.test(m[3])?m[3].split(/=/)[1]:'true')"})})(jQuery);(function(C){var E=function(){return C.browser.msie?"tabIndex":"tabindex"};var A=function(F){if(F.length<=0){return false}return jQuery(F[0]).is("a, input, button, select, area, textarea, object")};var B=function(G){if(G.length<=0){return undefined}if(!G.hasTabindexAttr()){return A(G)?Number(0):undefined}var F=G.attr(E());return Number(F)};var D=function(F,G){return F.each(function(H,I){C(I).attr(E(),G)})};C.fn.tabindex=function(F){if(F!==null&&F!==undefined){return D(this,F)}else{return B(this)}};C.fn.removeTabindex=function(){return this.each(function(F,G){C(G).removeAttr(E())})};C.fn.hasTabindexAttr=function(){if(this.length<=0){return false}var F=this[0].getAttributeNode(E());return F?F.specified:false};C.fn.hasTabindex=function(){return this.hasTabindexAttr()||A(this)}})(jQuery);(function(J){J.a11y=J.a11y||{};J.a11y.keys={UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,TAB:9,CTRL:17,SHIFT:16,ALT:18};J.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var T="keyboard-a11y";var N="selectionContext";var P="userHandlers";var f="defaultActivate";var X=-32768;var U={next:J.a11y.keys.DOWN,previous:J.a11y.keys.UP};var B={next:J.a11y.keys.RIGHT,previous:J.a11y.keys.LEFT};var c=function(h){return h.jquery?h[0]:h};var O=function(h){if(h.onLeaveContainer){h.onLeaveContainer(h.selectables[h.activeItemIndex])}else{if(h.onUnselect){h.onUnselect(h.selectables[h.activeItemIndex])}}if(!h.options.rememberSelectionState){h.activeItemIndex=X}};var A=function(m,i){if(!m.modifier){return true}var j=m.modifier;var k=j&&i.ctrlKey;var h=j&&i.altKey;var l=j&&i.shiftKey;return k||h||l};var G=function(h){return function(i){var j=i.which?i.which:i.keyCode;if(j===h.key&&h.activateHandler&&A(h,i)){h.activateHandler(i.target,i);i.preventDefault()}}};var M=function(h,i){if(i){i(h)}};var Y=function(i,h){if(h&&i){h(i)}};var E=function(i,h){Y(i,h.options.onUnselect)};var Z=function(h,i){E(i.selectedElement(),i);h=c(h);var j=i.selectables.index(h);if(j===-1){return }i.activeItemIndex=j;M(h,i.options.onSelect)};var g=function(h){return function(i){Z(i.target,h);return i.stopPropagation()}};var F=function(h){return function(i){E(i.target,h);return i.stopPropagation()}};var V=function(h){var i=h.selectables;if(h.activeItemIndex>=i.length){h.activeItemIndex=0}if(h.activeItemIndex<0&&h.activeItemIndex!==X){h.activeItemIndex=i.length-1}if(h.activeItemIndex>=0){J(i[h.activeItemIndex]).focus()}};var b=function(h){E(h.selectedElement(),h);if(h.activeItemIndex===X){h.activeItemIndex=-1}};var d=function(h){b(h);++h.activeItemIndex;V(h)};var L=function(h){b(h);--h.activeItemIndex;V(h)};var I=function(h,j,i){return function(k){if(k.which===j.next){d(h);k.preventDefault()}else{if(k.which===j.previous){L(h);k.preventDefault()}}}};var S=function(h){var i;if(h===J.a11y.orientation.HORIZONTAL){i=B}else{if(h===J.a11y.orientation.VERTICAL){i=U}}return i};var Q=function(h){return function(i){var k=h.options.autoSelectFirstItem;var j=typeof (k)==="function"?k():k;if(h.focusIsLeavingContainer){j=false}if(j&&i.target===h.container.get(0)){if(h.activeItemIndex===X){h.activeItemIndex=0}J(h.selectables[h.activeItemIndex]).focus()}return i.stopPropagation()}};var a=function(h){return function(i){h.focusIsLeavingContainer=false;return i.stopPropagation()}};var W=function(h){h.each(function(i,j){j=J(j);if(!j.hasTabindex()||j.tabindex()<0){j.tabindex(0)}})};var e=function(l,o,h,j){var n=[];J(h).each(function(i,p){n.push({modifier:null,key:p,activateHandler:o})});if(j&&j.additionalBindings){n=n.concat(j.additionalBindings)}for(var k=0;k<n.length;++k){var m=n[k];l.keydown(G(m))}};var C=function(h){return function(i){if(i.which!==J.a11y.keys.TAB){return }O(h);if(i.shiftKey){h.focusIsLeavingContainer=true}}};var D=function(i,l,m){var j=J.extend(true,{},l,m);var n=S(j.direction);var h=j.selectableElements?j.selectableElements:i.find(j.selectableSelector);var k={container:i,activeItemIndex:X,selectables:h,focusIsLeavingContainer:false,options:j};k.selectablesUpdated=function(o){if(typeof (k.options.selectablesTabindex)==="number"){k.selectables.tabindex(k.options.selectablesTabindex)}k.selectables.unbind("focus."+T);k.selectables.unbind("blur."+T);k.selectables.bind("focus."+T,g(k));k.selectables.bind("blur."+T,F(k));if(o){Z(o,k)}else{V(k)}};k.refresh=function(){if(!k.options.selectableSelector){throw ("Cannot refresh selectable context which was not initialised by a selector")}k.selectables=i.find(j.selectableSelector);k.selectablesUpdated()};k.selectedElement=function(){return k.activeItemIndex<0?null:k.selectables[k.activeItemIndex]};if(n){i.keydown(I(k,n))}i.keydown(C(k));i.focus(Q(k));i.blur(a(k));k.selectablesUpdated();return k};var K=function(i,h){return function(j){if(!h){return }j=c(j);if(i.index(j)===-1){return }h(j)}};var R=function(i,h){var j=i.data(T);return j?j[h]:undefined};var H=function(i,h,k){var j=i.data(T)||{};j[h]=k;i.data(T,j)};J.fn.tabbable=function(){W(this);return this};J.fn.selectable=function(h){var i=D(this,this.selectable.defaults,h);H(this,N,i);return this};J.fn.getSelectableContext=function(){return R(this,N)};J.fn.activatable=function(i,h){e(this,i,this.activatable.defaults.keys,h);H(this,f,K(this,i));return this};J.fn.select=function(h){h.focus();return this};J.fn.selectNext=function(){d(R(this,N));return this};J.fn.selectPrevious=function(){L(R(this,N));return this};J.fn.currentSelection=function(){var h=R(this,N);return J(h.selectedElement())};J.fn.activate=function(i){var h=R(this,f);h(i);return this};J.fn.activatable.defaults={keys:[J.a11y.keys.ENTER,J.a11y.keys.SPACE]};J.fn.selectable.defaults={direction:J.a11y.orientation.VERTICAL,selectablesTabindex:-1,autoSelectFirstItem:true,rememberSelectionState:true,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null}})(jQuery);if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}var fluid_0_5=fluid_0_5||{};var fluid=fluid||fluid_0_5;(function(E,D){D.version="Infusion 0.5";D.fail=function(G){D.logEnabled=true;D.log(G.message?G.message:G);G.fail()};D.wrap=function(G){return((!G||G.jquery)?G:E(G))};D.unwrap=function(G){return G&&G.jquery&&G.length===1?G[0]:G};D.findKeyInObject=function(I,H){for(var G in I){if(I[G]===H){return G}}return null};D.clear=function(H){if(H instanceof Array){H.length=0}else{for(var G in H){delete H[G]}}};D.container=function(G){if(typeof G==="string"||G.nodeType&&(G.nodeType===1||G.nodeType===9)){G=E(G)}if(!G||!G.jquery||G.length!==1){D.fail({name:"NotOne",message:"A single container element was not found."})}return G};var C={};var B={};D.defaults=function(){var J=0;var H=C;if(typeof arguments[0]==="boolean"){H=B;J=1}var G=arguments[J];var I=arguments[J+1];if(I!==undefined){H[G]=I;return I}return H[G]};D.createDomBinder=function(H,J){var I={},K={};function L(N,M){return E.data(D.unwrap(M))+"-"+N}function G(O,N,M){I[L(O,N)]=M}K.locate=function(O,Q){var M,N,P;M=J[O];N=Q?Q:H;if(!N){D.fail("DOM binder invoked for selector "+O+" without container")}if(!M){return N}if(typeof (M)==="function"){P=E(M.call(null,D.unwrap(N)))}else{P=E(M,N)}if(P.get(0)===document){P=[]}G(O,N,P);return P};K.fastLocate=function(N,Q){var M=Q?Q:H;var O=L(N,M);var P=I[O];return P?P:K.locate(N,Q)};K.clear=function(){I={}};K.refresh=function(P,Q){var N=Q?Q:H;if(typeof P==="string"){P=[P]}if(N.length===undefined){N=[N]}for(var O=0;O<P.length;++O){for(var M=0;M<N.length;++M){K.locate(P[O],N[M])}}};return K};D.mergeListeners=function(I,L){if(L){for(var H in L){var M=L[H];var N=H.indexOf(".");var K;if(N!==-1){K=H.substring(N+1);H=H.substring(0,N)}if(!I[H]){I[H]=D.event.getEventFirer()}var J=I[H];if(typeof (M)==="function"){J.addListener(M,K)}else{if(M&&typeof M.length==="number"){for(var G=0;G<M.length;++G){J.addListener(M[G],K)}}}}}};D.instantiateFirers=function(J,G){J.events={};if(G.events){for(var I in G.events){var H=G.events[I];J.events[I]=D.event.getEventFirer(H==="unicast",H==="preventable")}}D.mergeListeners(J.events,G.listeners)};D.mergeComponentOptions=function(H,G,J){var I=D.defaults(G);H.options=D.merge(I?I.mergePolicy:null,{},I,J)};D.initView=function(H,G,J){var I={};D.mergeComponentOptions(I,H,J);if(G){I.container=D.container(G);D.initDomBinder(I)}D.instantiateFirers(I,I.options);return I};D.COMPONENT_OPTIONS={};D.initSubcomponent=function(I,H,G){return D.initSubcomponents(I,H,G)[0]};D.initSubcomponents=function(M,N,O){var P=M.options[N];if(!P){return }var L=E.makeArray(P);var Q=-1;var I=[];for(var K=0;K<O.length;++K){if(O[K]===D.COMPONENT_OPTIONS){Q=K}}for(K=0;K<L.length;++K){P=L[K];if(Q!==-1&&P.options){O[Q]=P.options}var J=typeof (P)==="string"?P:P.type;var G=D.defaults(true,J);D.merge("reverse",M.options,G);I[K]=D.invokeGlobalFunction(J,O,{fluid:D});var H=I[K].returnedOptions;if(H){D.merge(M.options.mergePolicy,M.options,H);if(H.listeners){D.mergeListeners(M.events,H.listeners)}}}return I};D.initDomBinder=function(G){G.dom=D.createDomBinder(G.container,G.options.selectors);G.locate=G.dom.locate};function F(K,M,J,G){var N=K&&typeof (K)!=="string"?K[M]:K;if(typeof (N)==="function"){N.apply(null,J,G);return J}if(N==="replace"){D.clear(J)}for(var H in G){var O=(M?M+".":"")+H;var L=J[H];var I=G[H];if(I!==undefined){if(I!==null&&typeof I==="object"&&!I.nodeType&&!I.jquery){if(!L){J[H]=L=I instanceof Array?[]:{}}F(K,O,L,I)}else{if(L===null||L===undefined||N!=="reverse"){J[H]=I}}}}return J}D.merge=function(K,J){var O="";for(var I=2;I<arguments.length;++I){var G=arguments[I];if(G!==null&&G!==undefined){F(K,O,J,G)}}if(K&&typeof (K)!=="string"){for(var M in K){var N=K[M];if(typeof (N)==="string"&&N!=="replace"){var H=D.model.getBeanValue(J,M);if(H===null||H===undefined){var L=D.model.getBeanValue(J,N);D.model.setBeanValue(J,M,L)}}}}return J};D.invokeGlobalFunction=function(H,I,G){return D.model.getBeanValue(window,H,G).apply(null,I)};D.event={};var A=1;D.event.getEventFirer=function(I,J){var H=D.log;var G={};return{addListener:function(L,K){if(!L){return }if(I){K="unicast"}if(!K){if(!L.$$guid){L.$$guid=A+=1}K=L.$$guid}G[K]={listener:L}},removeListener:function(K){if(typeof (K)==="string"){delete G[K]}else{if(typeof (K)==="object"&&K.$$guid){delete G[K.$$guid]}}},fire:function(){for(var M in G){var K=G[M];try{var L=K.listener.apply(null,arguments);if(J&&L===true){return true}}catch(N){H("FireEvent received exception "+N.message+" e "+N+" firing to listener "+M);throw (N)}}}}};D.model={};D.model.copyModel=function(H,G){D.clear(H);E.extend(true,H,G)};D.model.parseEL=function(G){return G.split(".")};D.model.setBeanValue=function(H,J,K){var G=D.model.parseEL(J);for(var I=0;I<G.length-1;I+=1){if(!H[G[I]]){H[G[I]]={}}H=H[G[I]]}H[G[G.length-1]]=K};D.model.getBeanValue=function(I,L,G){var H=D.model.parseEL(L);for(var J=0;J<H.length;J+=1){var K=H[J];if(G&&G[K]){I=G[K];G=null}else{I=I[H[J]]}if(!I){return I}}return I};D.logEnabled=false;D.log=function(G){if(D.logEnabled){G=new Date().toTimeString()+":  "+G;if(typeof (console)!=="undefined"){if(console.debug){console.debug(G)}else{console.log(G)}}else{if(typeof (YAHOO)!=="undefined"){YAHOO.log(G)}else{if(typeof (opera)!=="undefined"){opera.postError(G)}}}}};D.findAncestor=function(G,H){return H(G)?G:E.grep(E(G).parents(),H)[0]};D.jById=function(H){var G=D.byId(H);return G?E(G):null};D.byId=function(H){var G=document.getElementById(H);if(G){if(G.getAttribute("id")!==H){D.fail("Problem in document structure - picked up element "+D.dumpEl(G)+" for id "+H+" without this id - most likely the element has a name which conflicts with this id")}return G}else{return null}};D.getId=function(G){return D.unwrap(G).getAttribute("id")};D.transform=function(K){var J=[];for(var I=0;I<K.length;++I){var G=K[I];for(var H=0;H<arguments.length-1;++H){G=arguments[H+1](G,I)}J[J.length]=G}return J};D.find=function(J,I,K){for(var H=0;H<J.length;++H){var G=I(J[H],H);if(G!==null&&G!==undefined){return G}}return K};D.accumulate=function(J,I,G){for(var H=0;H<J.length;++H){G=I(J[H],G,H)}return G};D.remove_if=function(I,H){for(var G=0;G<I.length;++G){if(H(I[G],G)){I.splice(G,1);--G}}return I};D.stringTemplate=function(K,H){var J=K;for(var I in H){if(H.hasOwnProperty(I)){var G="%"+I;J=J.replace(G,H[I])}}return J}})(jQuery,fluid_0_5);var fluid_0_5=fluid_0_5||{};(function(C,B){B.dom=B.dom||{};var A=function(D){if(D.node.firstChild){D.node=D.node.firstChild;D.depth+=1;return D}while(D.node){if(D.node.nextSibling){D.node=D.node.nextSibling;return D}D.node=D.node.parentNode;D.depth-=1}return D};B.dom.iterateDom=function(H,G){var F={node:H,depth:0};var E=H;while(F.node!==null&&F.depth>=0&&F.depth<B.dom.iterateDom.DOM_BAIL_DEPTH){var D=false;if(F.node.nodeType===1){D=G(F.node,F.depth)}if(D){F.node.parentNode.removeChild(F.node);F.node=E}E=F.node;F=A(F)}};B.dom.iterateDom.DOM_BAIL_DEPTH=256;B.dom.computeAbsolutePosition=function(D){var F=0,E=0;if(D.offsetParent){do{F+=D.offsetLeft;E+=D.offsetTop;D=D.offsetParent}while(D);return[F,E]}};B.dom.isContainer=function(D,E){for(;E;E=E.parentNode){if(D===E){return true}}return false};B.dom.insertAfter=function(D,E){var F=E.nextSibling;if(!F){E.parentNode.appendChild(D)}else{E.parentNode.insertBefore(D,F)}};B.dom.isWhitespaceNode=function(D){return !(/[^\t\n\r ]/.test(D.data))};B.dom.isIgnorableNode=function(D){return(D.nodeType===8)||((D.nodeType===3)&&B.dom.isWhitespaceNode(D))};B.dom.cleanseScripts=function(D){var E=jQuery.data(D,B.dom.cleanseScripts.MARKER);if(!E){B.dom.iterateDom(D,function(F){return(F.tagName.toLowerCase()==="script")});jQuery.data(D,B.dom.cleanseScripts.MARKER,true)}};B.dom.cleanseScripts.MARKER="fluid-scripts-cleansed";B.dom.dumpEl=function(E){var F;if(!E){return"null"}if(E.nodeType===3||E.nodeType===8){return"[data: "+E.data+"]"}if(typeof E.length==="number"){F="[";for(var D=0;D<E.length;++D){F+=B.dumpEl(E[D]);if(D<E.length-1){F+=", "}}return F+"]"}E=jQuery(E);F=E.get(0).tagName;if(E.attr("id")){F+="#"+E.attr("id")}if(E.attr("class")){F+="."+E.attr("class")}return F}})(jQuery,fluid_0_5);var fluid_0_5=fluid_0_5||{};(function(J,F){F.orientation={HORIZONTAL:4,VERTICAL:1};F.rectSides={4:["left","right"],1:["top","bottom"],8:"top",12:"bottom",2:"left",3:"right"};F.position={BEFORE:-1,AFTER:1,INSIDE:2,REPLACE:3};F.direction={NEXT:1,PREVIOUS:-1,UP:8,DOWN:12,LEFT:2,RIGHT:3};F.directionSign=function(K){return K===F.direction.UP||K===F.direction.LEFT?F.direction.PREVIOUS:F.direction.NEXT};F.directionAxis=function(K){return K===F.direction.LEFT||K===F.direction.RIGHT?0:1};F.directionOrientation=function(K){return F.directionAxis(K)?F.orientation.VERTICAL:F.orientation.HORIZONTAL};F.keycodeDirection={up:F.direction.UP,down:F.direction.DOWN,left:F.direction.LEFT,right:F.direction.RIGHT};F.moveDom=function(M,N,K){M=F.unwrap(M);N=F.unwrap(N);var L;if(K===F.position.INSIDE){N.appendChild(M)}else{if(K===F.position.BEFORE){for(L=N.previousSibling;;L=L.previousSibling){if(!L||!F.dom.isIgnorableNode(L)){if(L!==M){F.dom.cleanseScripts(M);N.parentNode.insertBefore(M,N)}break}}}else{if(K===F.position.AFTER){for(L=N.nextSibling;;L=L.nextSibling){if(!L||!F.dom.isIgnorableNode(L)){if(L!==M){F.dom.cleanseScripts(M);F.dom.insertAfter(M,N)}break}}}else{F.fail("Unrecognised position supplied to fluid.moveDom: "+K)}}}};F.normalisePosition=function(L,N,K,M){if(L===F.position.REPLACE){L=N&&K>=M?F.position.AFTER:F.position.BEFORE}return L};F.permuteDom=function(N,R,Q,L,O){N=F.unwrap(N);R=F.unwrap(R);var P=J.inArray(N,L);if(P===-1){F.fail("Error in permuteDom: source element "+F.dom.dumpEl(N)+" not found in source list "+F.dom.dumpEl(L))}var V=J.inArray(R,O);if(V===-1){F.fail("Error in permuteDom: target element "+F.dom.dumpEl(R)+" not found in source list "+F.dom.dumpEl(O))}var K=L===O;Q=F.normalisePosition(Q,K,V,P);var U={};U[F.position.AFTER]=N.nextSibling;U[F.position.BEFORE]=N.previousSibling;F.moveDom(L[P],O[V],Q);var T=K?V-1:L.length-2;var M;if(!K||V>P){for(M=T;M>P;--M){F.moveDom(L[M+1],L[M],F.position.AFTER)}if(P+1<L.length){F.moveDom(L[P+1],U[F.position.AFTER],F.position.BEFORE)}}var S=K?P-1:O.length-1;if(Q===F.position.AFTER){V++}if(!K||V<P){for(M=V;M<S;++M){F.moveDom(O[M],O[M+1],F.position.BEFORE)}if(S>=0&&S<O.length-1){F.moveDom(O[S],U[F.position.BEFORE],F.position.AFTER)}}};var B=function(K,L){return window.getComputedStyle?window.getComputedStyle(K,null).getPropertyValue(L):K.currentStyle[L]};var G=function(K){while(K){if(K.tagName.toLowerCase()==="body"){return true}K=K.parentNode}return false};var I=function(K){return"hidden"==K.type||B(K,"display")==="none"||B(K,"visibility")==="hidden"||!G(K)};var E=function(M,L,Q){var O={};O.element=M;O.orientation=L;if(Q===F.position.INSIDE){O.position=Q}if(I(M)){O.clazz="hidden"}var P=F.dom.computeAbsolutePosition(M)||[0,0];var N=M.offsetWidth;var K=M.offsetHeight;O.rect={left:P[0],top:P[1]};O.rect.right=P[0]+N;O.rect.bottom=P[1]+K;return O};var C=10000;function D(K){return"Rect top: "+K.top+" left: "+K.left+" bottom: "+K.bottom+" right: "+K.right}function H(K){if(!K||!K.rect){return"null"}else{return D(K.rect)+" position: "+K.position+" for "+F.dom.dumpEl(K.element)}}F.dropManager=function(){var S=[];var L={};var R={};var N;function T(X){return J(X).data("")}function U(X,c,a,b,d,Z){var Y=J.extend(true,{},a);Y.rect[c[b]]=Y.rect[c[1-b]]+(b?1:-1);Y.rect[c[1-b]]=(b?-1:1)*C;Y.position=d===F.position.INSIDE?d:(b?F.position.BEFORE:F.position.AFTER);Y.clazz=Z;X[X.length]=Y}function Q(a,Y,Z,X,c,b){var f=J.extend(true,{},Z);var d=J.extend(true,{},Z);var e=(f.rect[Y[0]]+f.rect[Y[1]])/2;f.rect[Y[1]]=e;f.position=F.position.BEFORE;d.rect[Y[0]]=e;d.position=F.position.AFTER;f.clazz=c;d.clazz=b;a[a.length]=f;a[a.length]=d}function P(Z,Y,a,X,b){Y+=a;if(Y<0&&X==="locked"){return"locked"}if(Y>=Z.length||b===null){return null}else{var a=Z[Y];return b(a)==="locked"&&X==="locked"?"locked":null}}var O;var M,K;R.updateGeometry=function(g){O=g;S=[];L={};var X=g.elementMapper;for(var f=0;f<g.extents.length;++f){var b=g.extents[f];var Y=b.orientation;var Z=F.rectSides[Y];function a(m,i,p,q,l){var k=E(m,Y,q);k.owner=b;if(k.clazz!=="hidden"&&X){k.clazz=X(m)}L[J.data(m)]=k;var n=P(b.elements,l,F.position.BEFORE,k.clazz,X);var o=P(b.elements,l,F.position.AFTER,k.clazz,X);if(q===F.position.INSIDE){S[S.length]=k}else{Q(S,Z,k,q,n,o)}if(i&&g.sentinelize){U(S,Z,k,1,q,n)}if(p&&g.sentinelize){U(S,Z,k,0,q,o)}return k}var h=true;for(var c=0;c<b.elements.length;++c){var e=b.elements[c];var d=a(e,c===0,c===b.elements.length-1,F.position.INTERLEAVED,c);if(d.clazz!=="hidden"){h=false}}if(h&&b.parentElement){a(b.parentElement,true,true,F.position.INSIDE)}}};R.startDrag=function(c,b,Z,a){var e=b[0]+Z/2;var d=b[1]+a/2;var Y=e-c.pageX;var X=d-c.pageY;R.updateGeometry(O);N=null;M=Y;K=X;J("").bind("mousemove.fluid-dropManager",R.mouseMove)};R.lastPosition=function(){return N};R.endDrag=function(){J("").unbind("mousemove.fluid-dropManager")};R.mouseMove=function(Y){var X=Y.pageX+M;var a=Y.pageY+K;var Z=R.closestTarget(X,a,N);if(Z&&Z!==F.dropManager.NO_CHANGE){N=Z;R.dropChangeFirer.fire(Z)}};R.dropChangeFirer=F.event.getEventFirer();var V={element:null};R.closestTarget=function(g,e,b){var a=Number.MAX_VALUE;var Y=V;var X=Number.MAX_VALUE;var f=V;for(var d=0;d<S.length;++d){var c=S[d];if(c.clazz==="hidden"){continue}var Z=F.geom.minPointRectangle(g,e,c.rect);if(c.clazz==="locked"){if(Z<X){X=Z;f=c}}else{if(Z<a){a=Z;Y=c}if(Z===0){break}}}if(!Y){return Y}if(X>=a){f=V}if(b&&b.position===Y.position&&F.unwrap(b.element)===F.unwrap(Y.element)&&F.unwrap(b.lockedelem)===F.unwrap(f.element)){return F.dropManager.NO_CHANGE}return{position:Y.position,element:Y.element,lockedelem:f.element}};R.projectFrom=function(a,c,b){R.updateGeometry(O);var Z=L[T(a)];var Y=F.geom.projectFrom(Z.rect,c,S,b);if(!Y.cacheelem){return null}var X=Y.cacheelem.position;return{element:Y.cacheelem.element,position:X?X:F.position.BEFORE}};function W(Y,a,Z){var b=F.directionSign(a);var X=J(Z).index(Y)+b;if(X<0){X+=Z.length}X%=Z.length;return Z[X]}R.logicalFrom=function(Y,a,Z){var X=R.getOwningSpan(Y,F.position.INTERLEAVED,Z);return{element:W(Y,a,X),position:F.position.REPLACE}};R.lockedWrapFrom=function(Z,d,c){var b=R.logicalFrom(Z,d,c);var X=R.getOwningSpan(Z,F.position.INTERLEAVED,c);var a=L[T(Z)].owner.elements;if(c||X[0]===a[0]){return b}var Y=W(Z,d,a);if(O.elementMapper(Y)==="locked"){b.element=null;b.clazz="locked"}return b};R.getOwningSpan=function(Z,Y,b){var X=L[T(Z)].owner;var a=Y===F.position.INSIDE?[X.parentElement]:X.elements;if(!b&&O.elementMapper){a=J.makeArray(a);F.remove_if(a,function(c){return O.elementMapper(c)==="locked"})}return a};R.geometricMove=function(a,b,X){var Y=R.getOwningSpan(a,null,true);var Z=R.getOwningSpan(b,X,true);F.permuteDom(a,b,X,Y,Z)};return R};F.dropManager.NO_CHANGE="no change";F.geom=F.geom||{};F.geom.minPointRectangle=function(K,O,N){var M=K<N.left?(N.left-K):(K>N.right?(K-N.right):0);var L=O<N.top?(N.top-O):(O>N.bottom?(O-N.bottom):0);return M*M+L*L};F.geom.minRectRect=function(N,L){var M=N.right<L.left?L.left-N.right:L.right<N.left?N.left-L.right:0;var K=N.bottom<L.top?L.top-N.bottom:L.bottom<N.top?N.top-L.bottom:0;return M*M+K*K};var A=function(){return{mindist:Number.MAX_VALUE,minrdist:Number.MAX_VALUE}};F.geom.projectFrom=function(O,a,b,U){var M=F.directionAxis(a);var X=F.rectSides[a];var V=F.rectSides[M*15+5-a];var R=F.directionSign(a);var K={left:(7*O.left+1*O.right)/8,right:(5*O.left+3*O.right)/8,top:(7*O.top+1*O.bottom)/8,bottom:(5*O.top+3*O.bottom)/8};K[X]=R*C;K[V]=-K[X];function c(g,e,h){var f=e.rect;var i=F.geom.minRectRect(K,f);var d=-R*h*(O[h===1?X:V]-f[h===1?V:X]);if(i<=g.mindist&&d>=0){if(i==g.mindist&&d*h>g.minrdist){return }g.minrdist=d*h;g.mindist=i;g.minelem=e}}var S=A();var W=A();var N=A();for(var Y=0;Y<b.length;++Y){var Z=b[Y];var L=Z.owner&&Z.element===Z.owner.parentElement;if(Z.clazz==="hidden"||U&&L){continue}else{if(!U&&Z.clazz==="locked"){c(N,Z,1)}else{c(S,Z,1);c(W,Z,-1)}}}var Q=!S.minelem||W.mindist<S.mindist;var T=Q?W:S;var P={wrapped:Q,cacheelem:T.minelem};if(N.mindist<T.mindist){P.lockedelem=N.minelem}return P}})(jQuery,fluid_0_5);fluid_0_5=fluid_0_5||{};(function(C,D){var B=function(O,L,M){var N=C(O).clone();D.dom.iterateDom(N.get(0),function(P){if(P.tagName.toLowerCase()==="script"){return true}P.removeAttribute("id");if(P.tagName.toLowerCase()==="input"){P.setAttribute("disabled","disabled")}});N.removeAttr("id");N.removeClass("ui-droppable");N.addClass(L);if(M){var K=C(document.createElement("div"));K.append(N);K.append(M);N=K}C("body").append(N);if(!C.browser.safari){N.css("display","block").width(O.offsetWidth).height(O.offsetHeight)}if(C.browser.opera){N.hide()}return N};function F(L){var K=L.dom.fastLocate("selectables");if(K.length<=0){return null}return K[0]}function G(L,N,O,K){var M=N;var P=false;if(C.browser.msie){L[0].ondrag=function(){return false};L[0].onselectstart=function(){return false}}if(C.browser.opera){L.keypress(function(Q){if(P){P=false;Q.preventDefault();return false}});M=function(R){var Q=N(R);if(Q===false){P=true}}}L.keydown(M);L.keyup(O)}function J(K){var L=K.dom.fastLocate("selectables")[0];if(L){K.container.ariaState("activedescendent",L.id)}K.container.ariaRole(K.options.containerRole.container);K.container.ariaState("multiselectable","false");K.container.ariaState("readonly","false");K.container.ariaState("disabled","false")}function A(K){return K+"_avatar"}var I=function(K){if(K.keysets&&!(K.keysets instanceof Array)){K.keysets=[K.keysets]}};D.reorderer=function(Z,M){if(!Z){D.fail("Reorderer initialised with no container")}var a=D.initView("fluid.reorderer",Z,M);M=a.options;var T=D.dropManager();a.layoutHandler=D.initSubcomponent(a,"layoutHandler",[Z,M,T,a.dom]);a.activeItem=undefined;I(M);var K=a.locate("dropWarning");var X;if(K){X=K.clone()}var c=function(f){var h=M.keysets;for(var g=0;g<h.length;g++){if(h[g].modifier(f)){return true}}return false};var L=function(){return C.inArray(a.activeItem,a.dom.fastLocate("movables"))>=0};var N=function(f){a.dom.fastLocate("dropTargets").ariaState("dropeffect",f)};var U=M.styles;var V=function(f){return(!f.ctrlKey&&!f.altKey&&!f.shiftKey&&!f.metaKey)};var d=function(n){var p=a.activeItem;if(!p){return true}var f=M.keysets;for(var j=0;j<f.length;j++){var h=f[j];var q=false;var m=D.findKeyInObject(h,n.keyCode);if(!m){continue}var o=h.modifier(n);var g=D.keycodeDirection[m];var k=a.layoutHandler.getRelativePosition(p,g,!o);if(!k){continue}if(o){var l=a.events.onBeginMove.fire(p);if(l){return false}if(K.length>0){if(k.clazz==="locked"){a.events.onShowKeyboardDropWarning.fire(p,K);K.show()}else{K.hide()}}if(k.element){a.requestMovement(k,p)}}else{if(V(n)){C(k.element).focus()}}return false}return true};a.handleKeyDown=function(f){if(!a.activeItem||a.activeItem!==f.target){return true}var g=C(a.activeItem);if(!g.hasClass(U.dragging)&&c(f)){if(L()){g.removeClass(U.selected);g.addClass(U.dragging);g.ariaState("grab","true");N("move")}return false}return d(f)};a.handleKeyUp=function(f){if(!a.activeItem||a.activeItem!==f.target){return true}var g=C(a.activeItem);if(g.hasClass(U.dragging)&&!c(f)){if(K){K.hide()}g.removeClass(U.dragging);g.addClass(U.selected);g.ariaState("grab","supported");N("none");return false}return false};var O;var P=function(g){var f=C(document.createElement(g));f.addClass(M.styles.dropMarker);f.hide();return f};D.logEnabled=true;a.requestMovement=function(g,f){if(!g||D.unwrap(g.element)===D.unwrap(f)){return }a.events.onMove.fire(f,g);T.geometricMove(f,g.element,g.position);C(a.activeItem).focus();a.refresh();T.updateGeometry(a.layoutHandler.getGeometricInfo());a.events.afterMove.fire(f,g,a.dom.fastLocate("movables"))};var Y=function(f,g){a.dom.fastLocate("grabHandle",f)[g?"addClass":"removeClass"](U.hover)};function S(h){var g=M.styles;h.ariaState("grab","supported");h.mouseover(function(){a.events.onHover.fire(h,true)});h.mouseout(function(){a.events.onHover.fire(h,false)});var f;h.draggable({refreshPositions:false,scroll:true,helper:function(){var i;if(X){i=X[0]}f=C(M.avatarCreator(h[0],g.avatar,i));f.attr("id",A(a.container.id));return f},start:function(o,n){var j=a.events.onBeginMove.fire(h);if(j){return false}var m=a.dom.fastLocate("grabHandle",h)[0];var l=D.dom.computeAbsolutePosition(m);var i=m.offsetWidth;var k=m.offsetHeight;h.focus();h.removeClass(M.styles.selected);h.addClass(M.styles.mouseDrag);h.ariaState("grab","true");N("move");T.startDrag(o,l,i,k);f.show()},stop:function(k,j){h.removeClass(M.styles.mouseDrag);h.addClass(M.styles.selected);C(a.activeItem).ariaState("grab","supported");var i=D.unwrap(O);if(i.parentNode){i.parentNode.removeChild(i)}f.hide();j.helper=null;N("none");T.endDrag();a.requestMovement(T.lastPosition(),h);a.activeItem.focus()},handle:a.dom.fastLocate("grabHandle",h)})}function e(f,g){f.removeClass(g.selected);f.removeClass(g.dragging);f.addClass(g.defaultStyle);f.ariaState("selected","false")}var R=function(h){a.events.onSelect.fire(h);var g=M.styles;if(a.activeItem&&a.activeItem!==h){e(C(a.activeItem),g)}a.activeItem=h;var f=C(h);f.removeClass(g.defaultStyle);f.addClass(g.selected);f.ariaState("selected","true");a.container.ariaState("activedescendent",h.id)};var b=function(){var g=function(i){e(C(this),M.styles);return i.stopPropagation()};var h=function(i){R(this);return i.stopPropagation()};var f=a.dom.fastLocate("selectables");f.addClass(U.defaultStyle);f.blur(g);f.focus(h);f.click(function(i){var j=D.unwrap(a.dom.fastLocate("grabHandle",this));if(D.dom.isContainer(j,i.target)){C(this).focus()}});f.ariaRole(M.containerRole.item);f.ariaState("selected","false");f.ariaState("disabled","false");a.container.selectable({selectableElements:f,selectablesTabindex:a.options.selectablesTabindex,direction:null});a.selectableContext=a.container.getSelectableContext()};var W=function(f){D.moveDom(O,f.element,f.position);O.css("display","");if(X){if(f.lockedelem){X.show()}else{X.hide()}}};var Q=function(){var j=a.dom.fastLocate("movables");var h=a.dom.fastLocate("dropTargets");b();for(var f=0;f<j.length;f++){var g=j[f];S(C(g))}if(j.length>0){O=P(j[0].tagName)}T.updateGeometry(a.layoutHandler.getGeometricInfo());T.dropChangeFirer.addListener(W);h.ariaState("dropeffect","none")};if(a.container){G(a.container,a.handleKeyDown,a.handleKeyUp);J(a);a.container.tabbable();Q()}if(M.afterMoveCallbackUrl){a.events.afterMove.addListener(function(){var f=a.layoutHandler;var g=f.getModel?f.getModel():M.acquireModel(a);C.post(M.afterMoveCallbackUrl,JSON.stringify(g))},"postModel")}a.events.onHover.addListener(Y,"style");a.refresh=function(){a.dom.refresh("movables");a.dom.refresh("selectables");a.dom.refresh("grabHandle",a.dom.fastLocate("movables"));a.dom.refresh("stylisticOffset",a.dom.fastLocate("movables"));a.dom.refresh("dropTargets");a.selectableContext.selectables=a.dom.fastLocate("selectables");a.selectableContext.selectablesUpdated(a.activeItem)};a.refresh();return a};D.reorderer.keys={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:19,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,i:73,j:74,k:75,m:77};D.reorderer.defaultKeysets=[{modifier:function(K){return K.ctrlKey},up:D.reorderer.keys.UP,down:D.reorderer.keys.DOWN,right:D.reorderer.keys.RIGHT,left:D.reorderer.keys.LEFT},{modifier:function(K){return K.ctrlKey},up:D.reorderer.keys.i,down:D.reorderer.keys.m,right:D.reorderer.keys.k,left:D.reorderer.keys.j}];D.reorderer.roles={GRID:{container:"grid",item:"gridcell"},LIST:{container:"list",item:"listitem"},REGIONS:{container:"main",item:"article"}};var E=function(K,L,M){M=M||{};M.layoutHandler=L;return D.reorderer(K,M)};D.reorderList=function(K,L){return E(K,"fluid.listLayoutHandler",L)};D.reorderGrid=function(K,L){return E(K,"fluid.gridLayoutHandler",L)};D.reorderer.GEOMETRIC_STRATEGY="projectFrom";D.reorderer.LOGICAL_STRATEGY="logicalFrom";D.reorderer.WRAP_LOCKED_STRATEGY="lockedWrapFrom";D.reorderer.NO_STRATEGY=null;D.reorderer.relativeInfoGetter=function(L,N,M,K,O){return function(Q,S,P){var R=D.directionOrientation(S);var T=R===L?N:M;return T!==null?K[T](Q,S,P):null}};D.defaults("fluid.reorderer",{instructionMessageId:"message-bundle:",styles:{defaultStyle:"orderable-default",selected:"orderable-selected",dragging:"orderable-dragging",mouseDrag:"orderable-dragging",hover:"orderable-hover",dropMarker:"orderable-drop-marker",avatar:"orderable-avatar"},selectors:{dropWarning:".drop-warning",movables:".movables",grabHandle:"",stylisticOffset:""},avatarCreator:B,keysets:D.reorderer.defaultKeysets,layoutHandler:"fluid.listLayoutHandler",events:{onShowKeyboardDropWarning:null,onSelect:null,onBeginMove:"preventable",onMove:null,afterMove:null,onHover:null},mergePolicy:{keysets:"replace","selectors.selectables":"selectors.movables","selectors.dropTargets":"selectors.movables"}});function H(K,M,L){return function(){return{sentinelize:M,extents:[{orientation:K,elements:L.fastLocate("dropTargets")}],elementMapper:function(N){return C.inArray(N,L.fastLocate("movables"))===-1?"locked":null}}}}D.defaults(true,"fluid.listLayoutHandler",{orientation:D.orientation.VERTICAL,containerRole:D.reorderer.roles.LIST,selectablesTabindex:-1,sentinelize:true});D.listLayoutHandler=function(L,M,K,O){var N={};N.getRelativePosition=D.reorderer.relativeInfoGetter(M.orientation,D.reorderer.LOGICAL_STRATEGY,null,K,O);N.getGeometricInfo=H(M.orientation,M.sentinelize,O);return N};D.defaults(true,"fluid.gridLayoutHandler",{orientation:D.orientation.HORIZONTAL,containerRole:D.reorderer.roles.GRID,selectablesTabindex:-1,sentinelize:false});D.gridLayoutHandler=function(L,M,K,O){var N={};N.getRelativePosition=D.reorderer.relativeInfoGetter(M.orientation,D.reorderer.LOGICAL_STRATEGY,D.reorderer.GEOMETRIC_STRATEGY,K,O);N.getGeometricInfo=H(M.orientation,M.sentinelize,O);return N}})(jQuery,fluid_0_5);fluid_0_5=fluid_0_5||{};(function(A){A.reorderLayout=function(B,E){var D={layoutHandler:"fluid.moduleLayoutHandler"};var C=jQuery.extend(true,D,E);return A.reorderer(B,C)}})(fluid_0_5);fluid_0_5=fluid_0_5||{};fluid.moduleLayout=fluid.moduleLayout||{};(function(C,B){var E=function(G,F){return B.find(F.columns,function(J,I){var H=C.inArray(G,J.elements);return H===-1?null:{columnIndex:I,itemIndex:H}},{columnIndex:-1,itemIndex:-1})};var A=function(G,F){return B.find(F.columns,function(I,H){return G===I.container?H:null},-1)};B.moduleLayout.updateLayout=function(I,K,G,H){I=B.unwrap(I);K=B.unwrap(K);var F=E(I,H);H.columns[F.columnIndex].elements.splice(F.itemIndex,1);var M;if(G===B.position.INSIDE){M=H.columns[A(K,H)].elements;M.splice(M.length,0,I)}else{var L=E(K,H);M=H.columns[L.columnIndex].elements;G=B.normalisePosition(G,F.columnIndex===L.columnIndex,L.itemIndex,F.itemIndex);var J=G===B.position.BEFORE?0:1;M.splice(L.itemIndex+J,0,I)}};B.moduleLayout.layoutFromFlat=function(F,H,G){var I={};I.container=F;I.columns=B.transform(H,function(J){return{container:J,elements:C.makeArray(G.filter(function(){return B.dom.isContainer(J,this)}))}});return I};B.moduleLayout.layoutFromIds=function(F){return{container:B.byId(F.id),columns:B.transform(F.columns,function(G){return{container:B.byId(G.id),elements:B.transform(G.children,B.byId)}})}};B.moduleLayout.layoutToIds=function(F){return{id:B.getId(F.container),columns:B.transform(F.columns,function(G){return{id:B.getId(G.container),children:B.transform(G.elements,B.getId)}})}};var D=function(G,F){if(F){var H=C(G).offset();F=C(F);F.css("position","absolute");F.css("top",H.top);F.css("left",H.left)}};B.defaults(true,"fluid.moduleLayoutHandler",{orientation:B.orientation.VERTICAL,containerRole:B.reorderer.roles.REGIONS,selectablesTabindex:0,sentinelize:true});B.moduleLayoutHandler=function(H,N,K,I){var L={};var J;if(N.selectors.modules){J=B.moduleLayout.layoutFromFlat(H,I.locate("columns"),I.locate("modules"))}if(!J){var G=B.model.getBeanValue(N,"moduleLayout.layout");J=B.moduleLayout.layoutFromIds(G)}function F(O){var P=N.selectors.lockedModules?I.fastLocate("lockedModules"):[];return C.inArray(O,P)!==-1}L.getRelativePosition=B.reorderer.relativeInfoGetter(N.orientation,B.reorderer.WRAP_LOCKED_STRATEGY,B.reorderer.GEOMETRIC_STRATEGY,K,I);L.getGeometricInfo=function(){var S=[];var R={extents:S,sentinelize:N.sentinelize};R.elementMapper=function(T){return F(T)?"locked":null};for(var O=0;O<J.columns.length;O++){var Q=J.columns[O];var P={orientation:N.orientation,elements:C.makeArray(Q.elements),parentElement:Q.container};S.push(P)}return R};function M(O){return function(){var P=B.accumulate(J.columns,function(Q,R){return R.concat(Q.elements)},[]);if(!O){B.remove_if(P,F)}return P}}L.returnedOptions={selectors:{movables:M(false),dropTargets:M(false),selectables:M(true)},listeners:{onMove:function(O,P){B.moduleLayout.updateLayout(O,P.element,P.position,J)},"onShowKeyboardDropWarning.setPosition":D}};L.getModel=function(){return B.moduleLayout.layoutToIds(J)};return L}})(jQuery,fluid_0_5);