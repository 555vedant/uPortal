(function(E){var C="http://www.w3.org/2005/07/aaa";var F=["main","secondary","navigation","banner","contentinfo","statements","note","seealso","search"];var A=new RegExp("^"+F.join("|")+"$");var D=E.browser.mozilla&&(parseFloat(E.browser.version)<1.9);var B=(function(){if(D){return function(I,G,H){if(typeof H!="undefined"){I.each(function(J,K){K.setAttributeNS(C,"aaa:"+G,H)})}else{return I.get(0).getAttributeNS(C,G)}}}else{return function(I,G,H){if(typeof H!="undefined"){I.each(function(J,K){E(K).attr("aria-"+G,H)})}else{return I.attr("aria-"+G)}}}})();E.fn.extend({ariaRole:function(H){var G=this;if(H){H=(A.test(H)||!D)?H:"wairole:"+H;G.each(function(I,J){E(J).attr("role",H)});return G}else{var H=G.eq(0).attr("role");if(H){H=H.replace(/^wairole:/,"")}return H}},ariaState:function(){var G=arguments;var H=this;if(G.length==2){H.each(function(I,J){B(E(J),G[0],G[1])});return H}else{if(typeof G[0]=="string"){return B(H.eq(0),G[0])}else{H.each(function(I,J){E.each(G[0],function(K,L){E(J).ariaState(K,L)})});return H}}}});E.extend(E.expr[":"],{ariaRole:"jQuery(a).ariaRole()==m[3]",ariaState:"jQuery(a).ariaState(m[3].split(/=/)[0])==(/=/.test(m[3])?m[3].split(/=/)[1]:'true')"})})(jQuery);(function(C){var E=function(){return C.browser.msie?"tabIndex":"tabindex"};var A=function(F){if(F.length<=0){return false}return jQuery(F[0]).is("a, input, button, select, area, textarea, object")};var B=function(G){if(G.length<=0){return undefined}if(!G.hasTabindexAttr()){return A(G)?Number(0):undefined}var F=G.attr(E());return Number(F)};var D=function(F,G){return F.each(function(H,I){C(I).attr(E(),G)})};C.fn.tabindex=function(F){if(F!==null&&F!==undefined){return D(this,F)}else{return B(this)}};C.fn.removeTabindex=function(){return this.each(function(F,G){C(G).removeAttr(E())})};C.fn.hasTabindexAttr=function(){if(this.length<=0){return false}var F=this[0].getAttributeNode(E());return F?F.specified:false};C.fn.hasTabindex=function(){return this.hasTabindexAttr()||A(this)}})(jQuery);(function(J){J.a11y=J.a11y||{};J.a11y.keys={UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,TAB:9,CTRL:17,SHIFT:16,ALT:18};J.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var T="keyboard-a11y";var N="selectionContext";var P="userHandlers";var f="defaultActivate";var X=-32768;var U={next:J.a11y.keys.DOWN,previous:J.a11y.keys.UP};var B={next:J.a11y.keys.RIGHT,previous:J.a11y.keys.LEFT};var c=function(h){return h.jquery?h[0]:h};var O=function(h){if(h.onLeaveContainer){h.onLeaveContainer(h.selectables[h.activeItemIndex])}else{if(h.onUnselect){h.onUnselect(h.selectables[h.activeItemIndex])}}if(!h.options.rememberSelectionState){h.activeItemIndex=X}};var A=function(o,j){if(!o.modifier){return true}var k=o.modifier;var l=(k&&j.ctrlKey);var h=(k&&j.altKey);var n=(k&&j.shiftKey);return(l||h||n)};var G=function(h){return function(j){var k=(j.which?j.which:j.keyCode);if(k===h.key&&h.activateHandler&&A(h,j)){h.activateHandler(j.target,j);j.preventDefault()}}};var M=function(h,j){if(j){j(h)}};var Y=function(j,h){if(h&&j){h(j)}};var E=function(j,h){Y(j,h.options.onUnselect)};var Z=function(h,j){E(j.selectedElement(),j);h=c(h);var k=j.selectables.index(h);if(k===-1){return }j.activeItemIndex=k;M(h,j.options.onSelect)};var g=function(h){return function(j){Z(j.target,h);return j.stopPropagation()}};var F=function(h){return function(j){E(j.target,h);return j.stopPropagation()}};var V=function(h){var j=h.selectables;if(h.activeItemIndex>=j.length){h.activeItemIndex=0}if(h.activeItemIndex<0&&h.activeItemIndex!==X){h.activeItemIndex=j.length-1}if(h.activeItemIndex>=0){J(j[h.activeItemIndex]).focus()}};var b=function(h){E(h.selectedElement(),h);if(h.activeItemIndex===X){h.activeItemIndex=-1}};var d=function(h){b(h);++h.activeItemIndex;V(h)};var L=function(h){b(h);--h.activeItemIndex;V(h)};var I=function(h,k,j){return function(l){if(l.which===k.next){d(h);l.preventDefault()}else{if(l.which===k.previous){L(h);l.preventDefault()}}}};var S=function(h){var j;if(h===J.a11y.orientation.HORIZONTAL){j=B}else{j=U}return j};var Q=function(h){return function(j){var l=h.options.autoSelectFirstItem;var k=typeof (l)==="function"?l():l;if(h.focusIsLeavingContainer){k=false}if(k&&j.target===h.container.get(0)){if(h.activeItemIndex===X){h.activeItemIndex=0}J(h.selectables[h.activeItemIndex]).focus()}return j.stopPropagation()}};var a=function(h){return function(j){h.focusIsLeavingContainer=false;return j.stopPropagation()}};var W=function(h){h.each(function(j,k){k=J(k);if(!k.hasTabindex()||(k.tabindex()<0)){k.tabindex(0)}})};var e=function(l,p,h,j){var o=[];J(h).each(function(q,r){o.push({modifier:null,key:r,activateHandler:p})});if(j&&j.additionalBindings){o=o.concat(j.additionalBindings)}for(var k=0;k<o.length;k=k+1){var n=o[k];l.keydown(G(n))}};var C=function(h){return function(j){if(j.which!==J.a11y.keys.TAB){return }O(h);if(j.shiftKey){h.focusIsLeavingContainer=true}}};var D=function(j,n,o){var k=J.extend(true,{},n,o);var p=S(k.direction);var h=k.selectableElements?k.selectableElements:j.find(k.selectableSelector);var l={container:j,activeItemIndex:X,selectables:h,focusIsLeavingContainer:false,options:k};l.selectablesUpdated=function(){l.selectables.tabindex(-1);l.selectables.unbind("focus."+T);l.selectables.unbind("blur."+T);l.selectables.bind("focus."+T,g(l));l.selectables.bind("blur."+T,F(l));V(l)};l.refresh=function(){if(!l.options.selectableSelector){throw ("Cannot refresh selectable context which was not initialised by a selector")}l.selectables=j.find(k.selectableSelector);l.selectablesUpdated()};l.selectedElement=function(){return l.activeItemIndex<0?null:l.selectables[l.activeItemIndex]};j.keydown(I(l,p));j.keydown(C(l));j.focus(Q(l));j.blur(a(l));l.selectablesUpdated();return l};var K=function(j,h){return function(k){if(!h){return }k=c(k);if(j.index(k)===-1){return }h(k)}};var R=function(j,h){var k=j.data(T);return k?k[h]:undefined};var H=function(j,h,l){var k=j.data(T)||{};k[h]=l;j.data(T,k)};J.fn.tabbable=function(){W(this);return this};J.fn.selectable=function(h){var j=D(this,this.selectable.defaults,h);H(this,N,j);return this};J.fn.getSelectableContext=function(){return R(this,N)};J.fn.activatable=function(j,h){e(this,j,this.activatable.defaults.keys,h);H(this,f,K(this,j));return this};J.fn.select=function(h){h.focus();return this};J.fn.selectNext=function(){d(R(this,N));return this};J.fn.selectPrevious=function(){L(R(this,N));return this};J.fn.currentSelection=function(){var h=R(this,N);return J(h.selectedElement())};J.fn.activate=function(j){var h=R(this,f);h(j);return this};J.fn.activatable.defaults={keys:[J.a11y.keys.ENTER,J.a11y.keys.SPACE]};J.fn.selectable.defaults={direction:this.VERTICAL,autoSelectFirstItem:true,rememberSelectionState:true,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null}})(jQuery);var fluid=fluid||{};(function(I,B){B.keys={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:19,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,i:73,j:74,k:75,m:77};B.roles={GRID:{container:"grid",item:"gridcell"},LIST:{container:"list",item:"listitem"},REGIONS:{container:"main",item:"article"}};B.orientation={HORIZONTAL:"horiz",VERTICAL:"vert"};B.position={BEFORE:0,AFTER:1,INSIDE:2,USE_LAST_KNOWN:3,DISALLOWED:-1};B.direction={NEXT:1,PREVIOUS:-1};B.defaultKeysets=[{modifier:function(J){return J.ctrlKey},up:B.keys.UP,down:B.keys.DOWN,right:B.keys.RIGHT,left:B.keys.LEFT},{modifier:function(J){return J.ctrlKey},up:B.keys.i,down:B.keys.m,right:B.keys.k,left:B.keys.j}];B.wrap=function(J){return((!J||J.jquery)?J:I(J))};B.unwrap=function(J){return J.jquery?J[0]:J};B.container=function(J){if(typeof J==="string"||J.nodeType&&(J.nodeType===1||J.nodeType===9)){J=I(J)}if(!J||!J.jquery||J.length!==1){B.fail({name:"NotOne",message:"A single container element was not found."})}return J};var E={};B.defaults=function(J,K){if(arguments.length>1){E[J]=K;return K}return E[J]};B.dumpEl=function(J){if(!J){return"null"}J=I(J);var K=J.get(0).tagName;if(J.attr("id")){K+="#"+J.attr("id")}if(J.attr("class")){K+="."+J.attr("class")}return K};B.fail=function(J){B.utils.setLogging(true);B.utils.debug(J.message?J.message:J);J.fail(true)};function F(J){if(J.node.firstChild){J.node=J.node.firstChild;J.depth++;return J}while(J.node){if(J.node.nextSibling){J.node=J.node.nextSibling;return J}J.node=J.node.parentNode;J.depth--}return J}B.DOM_BAIL_DEPTH=256;B.iterateDom=function(L,K){var J={node:L,depth:0};while(J.node!==null&&J.depth>=0&&J.depth<B.DOM_BAIL_DEPTH){if(J.nodeType===1){K(J.node,J.depth)}J=F(J)}};B.createDomBinder=function(K,M){var L={};function O(Q,P){return I.data(B.unwrap(P))+"-"+Q}function J(R,Q,P){L[O(R,Q)]=P}var N={};N.locate=function(R,T){var P=M[R];var Q=T?T:K;if(!Q){B.fail("DOM binder invoked for selector "+R+" without container")}if(!P){return Q}var S;if(typeof (P)==="function"){S=I(P.call(null,B.unwrap(Q)))}else{S=I(P,Q)}if(S.get(0)===document){S=[]}J(R,Q,S);return S};N.fastLocate=function(Q,T){var P=T?T:K;var R=O(Q,P);var S=L[R];return S?S:N.locate(Q,T)};N.clear=function(){L={}};N.refresh=function(R,S){if(typeof R==="string"){R=[R]}if(!(S instanceof Array)){S=[S]}for(var Q=0;Q<R.length;++Q){for(var P=0;P<S.length;++P){N.locate(R[Q],S[P])}}};return N};B.initView=function(K,J,N){var L={};var M=B.defaults(K);L.options=B.utils.merge(M?M.mergePolicy:null,{},M,N);if(J){L.container=B.container(J)}if(J){B.initDomBinder(L)}return L};B.initDomBinder=function(J){J.dom=B.createDomBinder(J.container,J.options.selectors);J.locate=J.dom.locate};B.initDecorators=function(L){var J=L.options.componentDecorators;if(!J){return }if(typeof (J)==="string"){J=[J]}for(var K=0;K<J.length;K+=1){var M=J[K];B.utils.invokeGlobalFunction(M,[L,L.options[M]])}};var D=1;var G={};B.event={};B.event.getEventFirer=function(){var K=B.utils.debug;var J={};return{addListener:function(P,O,L){if(!O){if(!P.$$guid){P.$$guid=D+=1}O=P.$$guid}var N=[];if(L){for(var M in L){N.push(I.data(L[M]))}}J[O]={listener:P,exclusions:N}},removeListener:function(L){if(typeof (L)==="string"){delete J[L]}else{if(typeof (L)==="object"&&L.$$guid){delete J[L.$$guid]}}},fireEvent:function(){for(var O in J){var L=J[O];var N=false;for(var M in L.exclusions){var Q=L.exclusions[M];K("Checking exclusion for "+Q);if(G[Q]){K("Excluded");N=true;break}}if(!N){try{K("Firing to listener "+O+" with arguments "+arguments);L.listener.apply(null,arguments)}catch(P){K("FireEvent received exception "+P.message+" e "+P+" firing to listener "+O);throw (P)}}}}}};B.model={};B.model.copyModel=function H(K,J){B.utils.contund(K);I.extend(true,K,J)};B.model.parseEL=function(J){return J.split(".")};B.model.setBeanValue=function(K,M,N){var J=B.model.parseEL(M);for(var L=0;L<J.length-1;L+=1){if(!K[J[L]]){K[J[L]]={}}K=K[J[L]]}K[J[J.length-1]]=N};B.model.getBeanValue=function(K,M){var J=B.model.parseEL(M);for(var L=0;L<J.length;L+=1){K=K[J[L]];if(!K){return K}}return K};B.utils={};B.utils.computeAbsolutePosition=function(J){var L=0;var K=0;if(J.offsetParent){do{L+=J.offsetLeft;K+=J.offsetTop}while(J=J.offsetParent);return[L,K]}};B.utils.computeDomDepth=function(J){var K=0;while(J){J=J.parentNode;K+=1}return K};B.utils.mousePosition=function(O,K,J,N){var L;var M;if(K===B.orientation.VERTICAL){L=I(O).offset().top+(O.offsetHeight/2);M=N<L}else{L=I(O).offset().left+(O.offsetWidth/2);M=J<L}return(M?B.position.BEFORE:B.position.AFTER)};B.utils.seekNodesById=function(N,P,L){var J=N.getElementsByTagName(P);var O=[];for(var M=0;M<J.length;M+=1){var K=J[M];var Q=K.id;if(Q&&Q.match(L)){O.push(K)}}return O};B.utils.escapeSelector=function(J){return J.replace(/\:/g,"\\:")};B.utils.findForm=function(J){while(J){if(J.nodeName.toLowerCase()==="form"){return J}J=J.parentNode}};B.utils.contund=function(K){if(K instanceof Array){K.length=0}else{for(var J in K){delete K[J]}}};function C(N,P,M,J){var Q=N?N[P]:N;if(typeof (Q)==="function"){Q.apply(null,M,J);return M}if(Q==="contund"){B.utils.contund(M)}for(var K in J){var R=(P?P+".":"")+K;var O=M[K];var L=J[K];if(L!==undefined){if(L!==null&&typeof (L)==="object"){if(!O){M[K]=O=L instanceof Array?[]:{}}C(N,R,O,L)}else{M[K]=L}}}return M}B.utils.permute=function(){};B.utils.merge=function(N,M){var R="";for(var L=2;L<arguments.length;L+=1){var J=arguments[L];C(N,R,M,J)}if(N){for(var P in N){var Q=N[P];if(typeof (Q)==="string"&&Q!=="contund"){var K=B.model.getBeanValue(M,P);if(K===null||K===undefined){var O=B.model.getBeanValue(M,Q);B.model.setBeanValue(M,P,O)}}}}return M};B.utils.invokeGlobalFunction=function(J,K){return B.model.getBeanValue(window,J).apply(null,K)};B.utils.jById=function(K){var J=I("[id="+K+"]");if(J[0]&&J[0].id===K){return J}return null};var A=false;B.utils.debug=function(J){if(A){J=new Date().toTimeString()+":  "+J;if(typeof (console)!=="undefined"){if(console.debug){console.debug(J)}else{console.log(J)}}else{if(typeof (YAHOO)!=="undefined"){YAHOO.log(J)}else{if(typeof (opera)!=="undefined"){opera.postError(J)}}}}};B.log=B.utils.debug;B.utils.setLogging=function(J){if(typeof J==="boolean"){A=J}else{A=false}};B.utils.derivePercent=function(J,K){return Math.round((J*100)/K)};B.utils.filesizeStr=function(J){if(typeof J==="number"){if(J===0){return"0.0 KB"}else{if(J>0){if(J<1048576){return(Math.ceil(J/1024*10)/10).toFixed(1)+" KB"}else{return(Math.ceil(J/1048576*10)/10).toFixed(1)+" MB"}}}}return""};B.utils.stringTemplate=function(N,K){var M=N;for(var L in K){if(K.hasOwnProperty(L)){var J="%"+L;M=M.replace(J,K[L])}}return M};B.utils.findAncestor=function(J,K){return K(J)?J:I.grep(I(J).parents(),K)[0]}})(jQuery,fluid);fluid=fluid||{};(function(J,C){var B=function(P,M,N){var O=J(P).clone();C.iterateDom(O.get(0),function(Q){Q.removeAttribute("id");if(Q.tagName==="input"){Q.setAttribute("disabled","disabled")}});O.removeAttr("id");O.removeClass("ui-droppable");O.addClass(M);if(N){var L=J(document.createElement("div"));L.append(O);L.append(N);return L}else{return O}};C.defaults("fluid.reorderer",{containerRole:C.roles.LIST,instructionMessageId:"message-bundle:",styles:{defaultStyle:"orderable-default",selected:"orderable-selected",dragging:"orderable-dragging",mouseDrag:"orderable-dragging",hover:"orderable-hover",dropMarker:"orderable-drop-marker",avatar:"orderable-avatar"},selectors:{movables:".movables",grabHandle:""},avatarCreator:B,keysets:C.defaultKeysets,layoutHandlerName:"fluid.listLayoutHandler",mergePolicy:{keysets:"contund","selectors.selectables":"selectors.movables","selectors.dropTargets":"selectors.movables"}});function E(M){var L=M.locate("selectables");if(L.length<=0){return null}return L[0]}function F(M,N,O,P,L){M.focus(N);M.keydown(O);M.keyup(P);M.mousemove(L);if(J.browser.msie){M[0].ondrag=function(){return false};M[0].onselectstart=function(){return false}}}function K(L){var M=(L.locate("selectables")[0]);if(M){L.container.ariaState("activedescendent",M.id)}L.container.ariaRole(L.options.containerRole.container);L.container.ariaState("multiselectable","false");L.container.ariaState("readonly","false");L.container.ariaState("disabled","false")}function I(L,M){L.removeClass(M.selected);L.addClass(M.defaultStyle);L.ariaState("selected","false")}function A(L){return L+"_avatar"}var H=function(L){if(L.keysets&&!(L.keysets instanceof Array)){L.keysets=[L.keysets]}};C.reorderer=function(Z,O){var a=C.initView("fluid.reorderer",Z,O);a.layoutHandler=C.utils.invokeGlobalFunction(a.options.layoutHandlerName,[Z,a.options]);a.activeItem=undefined;H(a.options);var L=C.utils.jById(a.options.dropWarningId);var Y;if(L){Y=L.clone()}a.focusActiveItem=function(h){if(!a.activeItem){var j=E(a);if(!j){return h.stopPropagation()}J(j).focus()}else{J(a.activeItem).focus()}return h.stopPropagation()};var c=function(h){var k=a.options.keysets;for(var j=0;j<k.length;j++){if(k[j].modifier(h)){return true}}return false};var N=function(){return(J.inArray(a.activeItem,a.locate("movables"))>=0)};var P=function(h){a.dom.fastLocate("dropTargets").ariaState("dropeffect",h)};var W=a.options.styles;a.handleKeyDown=function(h){if(!a.activeItem||(a.activeItem!==h.target)){return true}var j=J(a.activeItem);if(!j.hasClass(W.dragging)&&c(h)){if(N()){j.removeClass(W.selected);j.addClass(W.dragging);j.ariaState("grab","true");P("move")}return false}return a.handleDirectionKeyDown(h)};a.handleKeyUp=function(h){if(!a.activeItem||(a.activeItem!==h.target)){return true}var j=J(a.activeItem);if(j.hasClass(W.dragging)&&!c(h)){if(L){L.hide()}j.removeClass(W.dragging);j.addClass(W.selected);j.ariaState("grab","supported");P("none");return false}return false};var d=function(h){if(N()){h(a.activeItem);a.activeItem.focus();J(a.activeItem).removeClass(a.options.styles.selected)}};var X=function(h){return(!h.ctrlKey&&!h.altKey&&!h.shiftKey&&!h.metaKey)};var V=function(l,j,h){var k=false;switch(l){case j.up:d(h.moveItemUp);k=true;break;case j.down:d(h.moveItemDown);k=true;break;case j.left:d(h.moveItemLeft);k=true;break;case j.right:d(h.moveItemRight);k=true;break}return k};var g=function(n,k,j,o){var h=false;var l;switch(n){case k.up:l=j.getItemAbove(o);h=true;break;case k.down:l=j.getItemBelow(o);h=true;break;case k.left:l=j.getLeftSibling(o);h=true;break;case k.right:l=j.getRightSibling(o);h=true;break}J(l).focus();return h};a.handleDirectionKeyDown=function(h){if(!a.activeItem){return true}var n=a.options.keysets;for(var j=0;j<n.length;j++){var k=n[j];var l=false;if(k.modifier(h)){if(L){L.hide()}l=V(h.keyCode,k,a.layoutHandler)}else{if(X(h)){l=g(h.keyCode,k,a.layoutHandler,a.activeItem)}}if(l){return false}}return true};var Q;var S=function(j){var h=J(document.createElement(j));h.addClass(a.options.styles.dropMarker);h.hide();return h};var M=C.dragManager();var f;C.utils.setLogging(true);var R=function(j){j=C.wrap(j);var h=A(a.container.id);return function(l){var n=M.computeTopTarget();if(n){var k=a.layoutHandler.dropPosition(n,a.activeItem,l.clientX,l.pageY);if(k===C.position.DISALLOWED){if(Y){Y.show()}}else{if(Y){Y.hide()}f={target:n,position:k};if(f.position===C.position.BEFORE){J(n).before(Q)}else{if(f.position===C.position.AFTER){J(n).after(Q)}else{if(f.position===C.position.INSIDE){J(n).append(Q)}}}Q.show()}}else{Q.hide();if(Y){Y.hide()}f=null}}};function U(j){var h=a.options.styles;j.addClass(h.defaultStyle);j.ariaState("grab","supported");j.mouseover(function(){a.dom.fastLocate("grabHandle",J(j[0])).addClass(h.hover)});j.mouseout(function(){a.dom.fastLocate("grabHandle",J(j[0])).removeClass(h.hover)});j.draggable({refreshPositions:false,scroll:true,helper:function(){var k;if(Y){k=Y[0]}var l=J(a.options.avatarCreator(j[0],h.avatar,k));l.attr("id",A(a.container.id));return l},start:function(l,k){j.focus();j.removeClass(a.options.styles.selected);j.addClass(a.options.styles.mouseDrag);j.ariaState("grab","true");P("move");M.startDrag()},stop:function(l,k){if(f){a.layoutHandler.mouseMoveItem(this,f.target,l.clientX,l.pageY,f.position)}C.utils.debug("Drag stopped");j.removeClass(a.options.styles.mouseDrag);j.addClass(a.options.styles.selected);J(a.activeItem).ariaState("grab","supported");Q.hide();k.helper=null;f=null;P("none");M.contund();a.activeItem.focus()},handle:a.dom.fastLocate("grabHandle",j[0])})}function e(j,h){j.ariaState("dropeffect","none");j.droppable({accept:h,greedy:true,tolerance:"pointer",over:function(l,k){M.recordOver(k.element[0])},out:function(l,k){M.recordOut(k.element[0])}})}var b=function(){var l=function(o){I(J(this),a.options.styles);return o.stopPropagation()};var n=function(o){a.selectItem(this);return o.stopPropagation()};var h=a.locate("selectables");for(var j=0;j<h.length;j++){var k=J(h[j]);k.tabindex("-1");k.blur(l);k.focus(n);k.ariaRole(a.options.containerRole.item);k.ariaState("selected","false");k.ariaState("disabled","false")}};var T=function(){var n=a.locate("movables");var l=a.locate("dropTargets");b();for(var h=0;h<n.length;h++){var k=n[h];U(J(k))}if(n.length>0){Q=S(n[0].tagName)}var j=function(o){return(n.index(o)>-1)};for(h=0;h<l.length;h++){e(J(l[h]),j)}};if(a.container){F(a.container,a.focusActiveItem,a.handleKeyDown,a.handleKeyUp,R(a.locate("dropTargets")));K(a);if(!a.container.hasTabindex()||(a.container.tabindex()<0)){a.container.tabindex("0")}T()}a.selectItem=function(k){var j=a.options.styles;if(a.activeItem&&a.activeItem!==k){I(J(a.activeItem),j)}a.activeItem=k;var h=J(k);h.removeClass(j.defaultStyle);h.addClass(j.selected);h.ariaState("selected","true");a.container.ariaState("activedescendent",k.id)};a.refresh=function(){a.dom.refresh("grabHandle",a.locate("movables"));a.dom.refresh("dropTargets")};a.refresh();return a};var G={selectors:{}};var D=function(L,N,P,M,Q){var O=C.utils.merge({},{},G,Q);O.orderChangedCallback=M;if(typeof N==="string"||typeof N=="function"){O.selectors.movables=N}else{O.selectors=N}O.layoutHandlerName=P;return C.reorderer(L,O)};C.reorderList=function(L,N,M,O){return D(L,N,"fluid.listLayoutHandler",M,O)};C.reorderGrid=function(L,N,M,O){return D(L,N,"fluid.gridLayoutHandler",M,O)}})(jQuery,fluid);(function(D,C){var B=function(G,F,E,I){var H=E;if(F.hasWrapped){H=I}if(H===C.position.AFTER){D(F.item).after(G)}else{D(F.item).before(G)}};var A={getSiblingInfo:function(G,F,I){var E=D(F).index(G)+I;var H=false;if(E===-1){E=F.length-1;H=true}else{if(E===F.length){E=0;H=true}else{if(E<-1||E>F.length){E=0}}}return{item:F[E],hasWrapped:H}},getRightSiblingInfo:function(F,E){return A.getSiblingInfo(F,E,C.direction.NEXT)},getLeftSiblingInfo:function(F,E){return A.getSiblingInfo(F,E,C.direction.PREVIOUS)},getItemInfoBelow:function(K,E){var I=D(K).offset();var G,H;var J,F;for(G=0;G<E.length;G++){F=E[G];H=D(E[G]).offset();if(H.left===I.left){J=J||F;if(H.top>I.top){return{item:F,hasWrapped:false}}}}J=J||E[0];return{item:J,hasWrapped:true}},getItemInfoAbove:function(K,F){var J=D(K).offset();var H,I;var E,G;for(H=F.length-1;H>-1;H--){G=F[H];I=D(F[H]).offset();if(I.left===J.left){E=E||G;if(J.top>I.top){return{item:G,hasWrapped:false}}}}E=E||F[0];return{item:E,hasWrapped:true}}};C.listLayoutHandler=function(E,H){var I=C.initView("fluid.listLayoutHandler",E,H);var G=function(){};var F=C.orientation.VERTICAL;if(H){G=H.orderChangedCallback||G;F=H.orientation||F}I.getGeometricInfo=function(){var J={}};I.getRightSibling=function(J){return A.getRightSiblingInfo(J,I.locate("selectables")).item};I.moveItemRight=function(K){var J=A.getRightSiblingInfo(K,I.locate("movables"));B(K,J,C.position.AFTER,C.position.BEFORE);G(K)};I.getLeftSibling=function(J){return A.getLeftSiblingInfo(J,I.locate("selectables")).item};I.moveItemLeft=function(K){var J=A.getLeftSiblingInfo(K,I.locate("movables"));B(K,J,C.position.BEFORE,C.position.AFTER);G(K)};I.getItemBelow=I.getRightSibling;I.getItemAbove=I.getLeftSibling;I.moveItemUp=I.moveItemLeft;I.moveItemDown=I.moveItemRight;I.dropPosition=function(L,K,J,M){return C.utils.mousePosition(L,F,J,M)};I.mouseMoveItem=function(K,M,J,N){var L=this.dropPosition(M,K,J,N);if(L===C.position.BEFORE){D(M).before(K)}else{if(L===C.position.AFTER){D(M).after(K)}}G(K)};return I};C.gridLayoutHandler=function(E,H){var I=C.listLayoutHandler(E,H);var G=function(){};if(H){G=H.orderChangedCallback||G}var F=C.orientation.HORIZONTAL;I.getItemBelow=function(J){return A.getItemInfoBelow(J,I.locate("selectables")).item};I.moveItemDown=function(K){var J=A.getItemInfoBelow(K,I.locate("movables"));B(K,J,C.position.AFTER,C.position.BEFORE);G(K)};I.getItemAbove=function(J){return A.getItemInfoAbove(J,I.locate("selectables")).item};I.moveItemUp=function(K){var J=A.getItemInfoAbove(K,I.locate("movables"));B(K,J,C.position.BEFORE,C.position.AFTER);G(K)};I.dropPosition=function(L,K,J,M){return C.utils.mousePosition(L,F,J,M)};return I}})(jQuery,fluid);fluid=fluid||{};(function(B){var A=function(H,G,D,J){J=J||{};var F=B.moduleLayout.inferSelectors(H,G,J.grabHandle);var I={containerRole:B.roles.REGIONS,orderChangedCallbackUrl:D,layoutHandlerName:"fluid.moduleLayoutHandler",moduleLayout:{permissions:G,layout:H},selectors:F};var E=jQuery.extend({},I,J);var C=B.utils.jById(B.moduleLayout.containerId(H));return B.reorderer(C,E)};B.initLayoutCustomizer=function(F,E,C,D){return A(F,E,C,D)};B.reorderLayout=function(H,D,K,L){L=L||{};L.orderChangedCallback=K;var C=jQuery(H);var E=jQuery(D.columns,C);var F=jQuery(D.modules,C);var I=jQuery(D.lockedModules,C);var G=B.moduleLayout.buildLayout(C,E,F);var J=B.moduleLayout.buildPermsForLockedModules(I,G);return B.initLayoutCustomizer(G,J,null,L)}})(fluid);fluid=fluid||{};fluid.moduleLayout=fluid.moduleLayout||{};(function(D,C){var B={layoutWalker:function(H,I){for(var F=0;F<I.columns.length;F++){var J=I.columns[F].children;for(var G=0;G<J.length;G++){var E=H(J,G,F);if(E){return E}}}},findColumnAndItemIndices:function(H,F){var E=function(K,J,I){if(K[J]===H){return{columnIndex:I,itemIndex:J}}};var G=B.layoutWalker(E,F);return G||{columnIndex:-1,itemIndex:-1}},findColIndex:function(G,F){for(var E=0;E<F.columns.length;E++){if(G===F.columns[E].id){return E}}return -1},findItemIndex:function(F,E){return B.findColumnAndItemIndices(F,E).itemIndex},numColumns:function(E){return E.columns.length},numModules:function(G){var F=0;for(var E=0;E<G.columns.length;E++){F+=G.columns[E].children.length}return F},isColumnIndex:function(E,F){return(E<F.columns.length)&&(E>=0)},findItemAndTargetIndices:function(M,N,I,L){var E=L.columns;var K={itemIndex:-1,targetIndex:-1};if(!M||!N){return K}var G=0;var P=I;for(var H=0;H<E.length;H++){var O=E[H].children;for(var F=0;F<O.length;F++){var J=O[F];if(J===M){K.itemIndex=G}if(J===N){K.targetIndex=P}if(K.itemIndex>=0&&K.targetIndex>=0){return K}G++;P++}P++}return K},getItemAt:function(F,E,G){var J=null;var I=G.columns;if(F>=0&&F<I.length){var H=I[F].children;if(E>=0&&E<H.length){J=H[E]}}return J},canItemMove:function(G,F){var H=F[G];for(var E=0;E<H.length;E++){if(H[E]===1){return true}}return false},isDropTarget:function(G,F){for(var E=0;E<F.length;E++){if(F[E][G]===1||F[E][G+1]===1){return true}}return false},targetAndPos:function(K,H,J,M){var E=(H===C.position.BEFORE)?-1:1;var L=B.findColumnAndItemIndices(K,J);var I={id:K,position:C.position.USE_LAST_KNOWN};if(L.columnIndex<0){return I}var O=J.columns[L.columnIndex].children;var G;for(var F=L.itemIndex+E;F>-1&&F<O.length;F=F+E){var N=O[F];if(C.moduleLayout.canMove(K,N,H,J,M)){return{id:N,position:H}}else{if(!G){G={id:N,position:C.position.DISALLOWED}}}}return G||I},findPortletsInColumn:function(F,G){var E=[];F.each(function(H,I){if(D("[id="+I.id+"]",G)[0]){E.push(I)}});return E},columnStructure:function(G,F){var E={};E.id=G.id;E.children=[];D(F).each(function(H,I){E.children.push(I.id)});return E}};C.moduleLayout.internals=B;C.moduleLayout.isColumn=function(G,F){var E=B.findColIndex(G,F);return(E>-1)};C.moduleLayout.canMove=function(J,I,E,G,F){if((E===C.position.USE_LAST_KNOWN)||(E===C.position.DISALLOWED)){return false}if(E===C.position.INSIDE){return true}var H=B.findItemAndTargetIndices(J,I,E,G);return(!!F[H.itemIndex][H.targetIndex])};C.moduleLayout.firstItemInAdjacentColumn=function(H,G,E){var F=function(L,J,I){var N=L[J];if(N===H){var K=I+G;var M=B.getItemAt(K,0,E);while(!M){K=K+G;if(B.isColumnIndex(K,E)){M=B.getItemAt(K,0,E)}else{M=H}}return M}};return B.layoutWalker(F,E)||H};C.moduleLayout.itemAboveBelow=function(H,G,F){var E=function(J,I){if(J[I]===H){var K=I+G;if((K<0)||(K>=J.length)){return H}else{return J[K]}}};return B.layoutWalker(E,F)||H};C.moduleLayout.updateLayout=function(I,G,F,H){if(!I||!G||I===G){return }var E=B.findColumnAndItemIndices(I,H);H.columns[E.columnIndex].children.splice(E.itemIndex,1);var K;if(F===C.position.INSIDE||F===C.position.USE_LAST_KNOWN){K=H.columns[B.findColIndex(G,H)].children;K.splice(K.length,0,I)}else{var J=B.findColumnAndItemIndices(G,H);K=H.columns[J.columnIndex].children;K.splice(J.itemIndex+F,0,I)}};C.moduleLayout.findTarget=function(H,J,G,K){var I=B.findColumnAndItemIndices(H,G).columnIndex+J;var E=G.columns[I];if(I<0||I>=B.numColumns(G)){return{id:H,position:C.position.BEFORE}}var M=E.children;for(var F=0;(F<M.length);F++){var L=M[F];if(C.moduleLayout.canMove(H,L,C.position.BEFORE,G,K)){return{id:L,position:C.position.BEFORE}}else{if(C.moduleLayout.canMove(H,L,C.position.AFTER,G,K)){return{id:L,position:C.position.AFTER}}}}return{id:E.id,position:C.position.INSIDE}};C.moduleLayout.targetAndPositionAbove=function(G,F,E){return B.targetAndPos(G,C.position.BEFORE,F,E)};C.moduleLayout.targetAndPositionBelow=function(G,F,E){return B.targetAndPos(G,C.position.AFTER,F,E)};C.moduleLayout.inferSelectors=function(L,P,S){P=P||C.moduleLayout.buildEmptyPerms(L);var J;var E;var N;var O=L.columns;for(var K=0;K<O.length;K++){var R=O[K].children;for(var I=0;I<R.length;I++){var M=R[I];var H="[id="+M+"]";J=J?J+","+H:H;var Q=B.findItemAndTargetIndices(M,M,C.position.BEFORE,L);if(B.canItemMove(Q.itemIndex,P)){E=E?E+","+H:H}if(B.isDropTarget(Q.targetIndex,P)){N=N?N+","+H:H}}var F="[id="+O[K].id+"]";N=N?N+","+F:F}var G={movables:E,selectables:J,dropTargets:N,grabHandle:S};return G};C.moduleLayout.containerId=function(E){return E.id};C.moduleLayout.lastItemInCol=function(H,G){var F=B.findColIndex(H,G);var E=G.columns[F];var I=E.children.length;if(I>0){return E.children[I-1]}return undefined};C.moduleLayout.buildEmptyPerms=function(K){var L=B.numColumns(K);var I=B.numModules(K);var F=[];var E=L+I;for(var J=0;J<I;J++){var H=[];for(var G=0;G<E;G++){H.push(1)}F.push(H)}return F};C.moduleLayout.buildPermsForLockedModules=function(M,L){if(M.length<=0){return C.moduleLayout.buildEmptyPerms(L)}function E(Q){return D.grep(M,function(R){return R.id===Q})[0]}var H=[];var J=[];var N=[];for(var G=0;G<L.columns.length;G+=1){var P=L.columns[G].children;var O=null;for(var K=0;K<P.length;K+=1){var F=P[K];N.push(F);if(E(F)&&(!O||E(O))){H.push(0)}else{H.push(1)}J.push(0);O=F}H.push(1);J.push(0)}var I=[];for(K=0;K<N.length;K+=1){if(E(N[K])){I.push(J)}else{I.push(H)}}return I};C.moduleLayout.buildLayout=function(F,H,G){var E={};E.id=F[0].id;E.columns=[];H.each(function(I,K){var J=B.findPortletsInColumn(G,K);E.columns.push(B.columnStructure(K,J))});return E};var A=function(F,E){if(E){var G=D(F).offset();E=D(E);E.css("position","absolute");E.css("top",G.top);E.css("left",G.left)}};C.moduleLayoutHandler=function(E,R){var O=C.initView("fluid.moduleLayoutHandler",E,R);var G=C.orientation.VERTICAL;var M=R.moduleLayout.layout;var J=R.moduleLayout.permissions||C.moduleLayout.buildEmptyPerms(M);R=R||{};var P=R.orderChangedCallback||function(){};if(R.orderChangedCallbackUrl){P=function(S){D.post(R.orderChangedCallbackUrl,JSON.stringify(M),function(T,U){J=T},"json")}}var Q=C.utils.jById(R.dropWarningId);var L=R.willShowKBDropWarning||A;var K=function(S,U){var T=C.moduleLayout.itemAboveBelow(S.id,U,M);return C.utils.jById(T)[0]};var N=function(S,T){var U=C.moduleLayout.firstItemInAdjacentColumn(S.id,T,M);return C.utils.jById(U)[0]};var I=function(U,T,S){if(!U||!T){return }if(S===C.position.BEFORE){D(T).before(U)}else{if(S===C.position.AFTER){D(T).after(U)}else{if(S===C.position.INSIDE){D(T).append(U)}}}C.moduleLayout.updateLayout(U.id,T.id,S,M);P(U)};var H=function(S,U){var V=C.moduleLayout.findTarget(S.id,U,M,J);var T=C.utils.jById(V.id)[0];I(S,T,V.position)};var F=function(S,V){var T=V(S.id,M,J);var U=C.utils.jById(T.id)[0];if(T.position===C.position.DISALLOWED){if(Q){L(S,Q[0]);Q.show()}}else{if(T.position!==C.position.USE_LAST_KNOWN){I(S,U,T.position)}}};O.getRightSibling=function(S){return N(S,C.direction.NEXT)};O.moveItemRight=function(S){H(S,C.direction.NEXT)};O.getLeftSibling=function(S){return N(S,C.direction.PREVIOUS)};O.moveItemLeft=function(S){H(S,C.direction.PREVIOUS)};O.getItemAbove=function(S){return K(S,C.direction.PREVIOUS)};O.moveItemUp=function(S){F(S,C.moduleLayout.targetAndPositionAbove)};O.getItemBelow=function(S){return K(S,C.direction.NEXT)};O.moveItemDown=function(S){F(S,C.moduleLayout.targetAndPositionBelow)};O.dropPosition=function(X,T,a,Y){if(C.moduleLayout.isColumn(X.id,M)){var S=C.moduleLayout.lastItemInCol(X.id,M);if(S===undefined){return C.position.INSIDE}var Z=C.utils.jById(S);var U=Z.offset().top+Z.height();if(Y>U){return C.position.INSIDE}else{return C.position.USE_LAST_KNOWN}}var V=C.utils.mousePosition(X,G,a,Y);var W=C.moduleLayout.canMove(T.id,X.id,V,M,J);if(W){return V}else{return C.position.DISALLOWED}};O.mouseMoveItem=function(U,V,T,W,S){I(U,V,S)};return O}})(jQuery,fluid);var fluid=fluid||{};(function(C,B){function A(D,F){var E=C.data(F,"fluid-dom-dirtiness");var G;if(!E||E<D){G=B.utils.computeDomDepth(F);C.data(F,"fluid-dom-depth",G);C.data(F,"fluid-dom-dirtiness",D)}if(!G){G=C.data(F,"fluid-dom-depth")}return G}B.dragManager=function(){var D=0;var F={};var E={};E.computeTopTarget=function(){var J=0;var G;for(var I in F){var H=F[I];if(H.depth>J){J=H.depth;G=H.element}}return G};E.startDrag=function(){++D};E.recordOver=function(G){var H=A(D,G);F[C.data(G)]={element:G,depth:H}};E.recordOut=function(G){delete F[C.data(G)]};E.contund=function(){F={}};return E}})(jQuery,fluid);var fluid=fluid||{};(function(C,B){B.dropManager=B.dropManager||{};var A=function(F,E){E.visible=E.element.is(":visible");if(!m[i].visible){return }var H=E.element.offset();var G=E.element.outerWidth();var D=E.element.outerHeight();E.rect=H;E.rect.right=H.left+G;E.rect.bottom=H.top+D;return E};B.dropManager.NO_CHANGE="no change";B.dropManager=function(){var E={};var F={};var D;F.updateGeometry=function(M){E={};for(var J=0;J<M.length;++J){var L=M[J];var K=L.expanseType;for(var H=0;H<L.elements.length;++H){var I=C(L.elements[H]);var G=A(I,{});G.id=I.data();E[G.id]=G}}};F.beginDrag=function(){D=null};F.mouseMove=function(G,I){var H=F.closestTarget(G,I,D);if(closetTarget!==B.dropManager.NO_CHANGE){D=H;dropChangerFirer.fireEvent(H)}};F.dropChangeFirer=B.getEventFirer();F.closestTarget=function(O,N,J){var I=MAX_VALUE;var G;for(var K in E){var L=E[K];var H=B.geom.minPointRectangle(O,N,L.rect);if(H<I){I=H;G=L}if(H===0){break}}var M=B.position.INSIDE;if(L.expanse===B.orientation.HORIZONTAL){M=O<(L.rect.left+L.rect.right)/2?B.position.BEFORE:B.position.AFTER}else{if(L.expanse===B.orientation.VERTICAL){M=N<(L.rect.top+L.rect.bottom)/2?B.position.BEFORE:B.position.AFTER}}if(J&&J.position===M&&J.element.data()===G.element.data()){return B.dropManager.NO_CHANGE}return{position:M,element:G.element}};return F};B.geom=B.geom||{};B.geom.minPointRectangle=function(D,H,G){var F=D<G.left?(G.left-D):(D>G.right?(D-G.right):0);var E=H<G.top?(G.top-H):(H>G.bottom?(H-G.bottom):0);return F*F+E*E}})(jQuery,fluid);