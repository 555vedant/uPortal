uPortal 2.3.4 Distribution
--------------------------

Purpose
-------
This distribution is targeted towards
people who would like to install
uPortal in a development or production 
environment.  It contains uPortal source
code and properties files, but not a servlet
container, directory, or relational database, 
which are required.  Use of this distribution
requires knowledge of J2EE environments and the
Ant tool from the Apache Jakarta project.


Contents
--------
1) uPortal 2.3.4
2) uPortal 2.3.4 java libraries (Xalan, Pluto, etc).
3) uPortal Architecture overview and JavaDoc API
   (see docs directory)


System requirements
-------------------
JDK 1.3 or higher
JAVA_HOME environment variable must be set
Installation of Ant from Jakarta: 
  http://ant.apache.org/


Instructions
------------
Modify build.properties with local settings.

Use the following ant targets:

initportal - installs uPortal into a servlet container, 
             prepares a relational database with uPortal schema and data,
	     publishes channels and pushed layout fragments,
             deploys portlet applications
dist - creates JavaDoc, uPortal jar, and uPortal WAR files.

For descriptions of other Ant targets, 
see docs/uPortal_tools_overview.txt.

Make sure the database and servlet container are running and
access uPortal with http://localhost:8080/uPortal
Your URL may be different if you have configured a different port
and/or context name.

You can login to uPortal with the following user name/password 
combinations:

demo, demo
student, student
faculty, faculty
staff, staff
developer, developer

Each user may have a slightly different layout.


Notes 
-----
-Several properties files and one database table changed
 since uPortal 2.2.x.  If you are upgrading from this version,
 you will need to see to it that your properties files and
 database data are upgraded appropriately.  The difficulty
 of upgrading from 2.2.x to 2.3.x is expected to be much lower 
 than similar upgrades in past versions.

-uPortal does not strictly require the use of connection
 pooling, but it is highly recommended for production
 installations.  If your servlet container does not provide
 connection pooling, try something like Yet Another Poolman.  
 For information about Yet Another Poolman, 
 see http://yapoolman.sourceforge.net/.

-Bug fixes from 2.2.x releases have been implemented in 2.3.x
 whenever they were appropriate

-If you experience XML/XSLT-related errors, there is a good
 chance that your environment is not using the version of
 Xalan/Xerces that comes with this release. If you are using
 Tomcat, try copying the following files into Tomcat's
 common/endorsed directory: xalan.jar, xercesImpl.jar, xml-apis.jar.
 Alternatively, you can specify the use of these jar files
 via a java parameter when starting your servlet container:
  -Xbootclasspath/p:xalan.jar;xercesImpl.jar;xml-apis.jar
 For more information, see Version section of
 http://xml.apache.org/xalan-j/faq.html

-JSR 168 Portlets are supported in this version of uPortal.
 For information on installing Portlets, see 
 http://www.uportal.org/implementors/portlets/workingWithPortlets.html.

-WSRP functionality was included in uPortal as early as uPortal 2.2.
 However, both the WSRP consumer and producer included in this release
 are known to have problems and should be avoided.  A working
 WSRP4J-based consumer is planned for uPortal 2.4.

Please report bugs and suggestions:

 http://www.uportal.org/bugzilla/

uPortal website:

 http://www.uportal.org


Changes since uPortal 2.3.3
---------------------------
Database:

(no changes)


Properties:

-Added sinceMajor and sinceMinor attributes to table elements in db/tables.xml and db/data.xml.


Bug fixes:

-Bug 1370, Fixed processing of extra field in UPFileSpec.
-Bug 1500, Fixed ability for users to change the skin without saving the layout.
-Bug 1604, Changed *.psd and *.ai files from ASCII to binary (-kb) in CVS.
-Bug 1610, Removed unnecessary copying of preference-related database rows during login.
-Bug 1611, Allowed changes in template user layouts to affect users that haven't saved a layout.
-Bug 1614, Fixed NPE caused when web.xml contained any of the elements: <env-entry>, <ejb-ref>, or <ejb-local-ref>.
-Bug 1615, Fixed behavior of edit and help buttons on portlets.
-Bug 1618, Moved ChannelManager's processing of request parameters after JNDI context construction.
-Bug 1620, Saved user layout along with user preferences when session expires.
-Bug 1621, Removed characters '/*/' from createCounter() method of RDBMCounterStore.
-Bug 1625, Fixed JDK 1.3 compilation incompatibilities.
-Bug 1628, Closed resources in RDBMPermissibleRegistry, RDBMPersonSearcher, RDBMUserIdentityStore, and RDBMUserLayoutStore.
-Bug 1632, Added ability for ChannelPublisher to construct permissions with both user and group principals.
-Bug 1634, Checked for null before closing input stream in CarClassLoader.
-Bug 1637, Assured that pulled fragments from template layouts appear in user layouts.
-Bug 1639, Corrected group-description element name in PAGSGroupStore.dtd.
-Bug 1640, Prevented caching HTML and XHTML serializers from inserting extra '>' characters in page markup.
-Prevented a NPE in RDBMUserIdentityStore when deleting a user in MySQL.
-Changed Boolean.getBoolean() to Boolean.valueOf().booleanValue in PortletApplicationUnmarshaller.
-Fixed AggregatedLayoutManager.deleteNode() method by deleting the node's children nodes. 
-Fixed limitation where a fragment could only be subscribed to once.


Other changes:

-Added uportal21.xml ant build file for upgrading a uPortal 2.1 database.
-Added upgrade capability to DbLoader invoked with a -u flag.
-Added ConvertProfilesToAL tool which enables 2.1 portals to upgrade to aggregated layouts.

