uPortal 2.3.1 Distribution
--------------------------

Purpose
-------
This distribution is targeted towards
people who would like to install
uPortal in a development or production 
environment.  It contains uPortal source
code and properties files, but not a servlet
container, directory, or relational database, 
which are required.  Use of this distribution
requires knowledge of J2EE environments and the
Ant tool from the Apache Jakarta project.


Contents
--------
1) uPortal 2.3.1
2) uPortal 2.3.1 java libraries (Xalan, Pluto, etc).
3) uPortal Architecture overview and JavaDoc API
   (see docs directory)


System requirements
-------------------
JDK 1.3 or higher
JAVA_HOME environment variable must be set
Installation of Ant from Jakarta: 
  http://ant.apache.org/


Instructions
------------
Modify build.properties with local settings.

Use the following ant targets:

initportal - installs uPortal into a servlet container, 
             prepares a relational database with uPortal schema and data,
	     publishes channels and pushed layout fragments,
             deploys portlet applications
dist - creates JavaDoc, uPortal jar, and uPortal WAR files.

For descriptions of other Ant targets, 
see docs/uPortal_tools_overview.txt.

Make sure the database and servlet container are running and
access uPortal with http://localhost:8080/uPortal
Your URL may be different if you have configured a different port
and/or context name.

You can login to uPortal with the following user name/password 
combinations:

demo, demo
student, student
faculty, faculty
staff, staff
developer, developer

Each user may have a slightly different layout.


Notes 
-----
-Several properties files and one database table changed
 since uPortal 2.2.x.  If you are upgrading from this version,
 you will need to see to it that your properties files and
 database data are upgraded appropriately.  The difficulty
 of upgrading from 2.2.x to 2.3.x is expected to be much lower 
 than similar upgrades in past versions.

-uPortal does not strictly require the use of connection
 pooling, but it is highly recommended for production
 installations.  If your servlet container does not provide
 connection pooling, try something like Yet Another Poolman.  
 For information about Yet Another Poolman, 
 see http://yapoolman.sourceforge.net/.

-Bug fixes from 2.2.x releases have been implemented in 2.3.x
 whenever they were appropriate

-If you experience XML/XSLT-related errors, there is a good
 chance that your environment is not using the version of
 Xalan/Xerces that comes with this release. If you are using
 Tomcat, try copying the following files into Tomcat's
 common/endorsed directory: xalan.jar, xercesImpl.jar, xml-apis.jar.
 Alternatively, you can specify the use of these jar files
 via a java parameter when starting your servlet container:
  -Xbootclasspath/p:xalan.jar;xercesImpl.jar;xml-apis.jar
 For more information, see Version section of
 http://xml.apache.org/xalan-j/faq.html

Please report bugs and suggestions:

 http://www.uportal.org/bugzilla/

uPortal website:

 http://www.uportal.org


Changes since uPortal 2.3
-------------------------
Database:

(no changes)


Properties:

(no changes)


Bug fixes:

-Bug 1481, Added missing end tag </p> in CError's html_full_sv_SE.xsl.
-Bug 1490, Used the request's scheme rather than protocol to form a new URL for WSRP and Portlet implementations.
-Bug 1491, Fixed duplicate key layout corruption for new users.
-Bug 1492, Added stats recording of layout events generated by the AggregatedLayoutManager.
-Bug 1493, Ensured that LogoutServlet only generates logout stat when an authenticated user logs out.
-Bug 1494, Replaced missing or unapproved channel with error channel in AggregatedLayoutStore.
-Bug 1495, Added ability in integratedModes theme to log in as guest and edit layout and preferences.
-Bug 1497, Eliminated RuntimeException when deleting the last fragment in CFragmentManager.
-Bug 1502, Ensured initialization of jvmLocale and prevented null locales from being added to locale list.
-Bug 1503, Passed CLogin's unauthenticated stylesheet parameter to html.xsl regardless of its value.
-Bug 1505, Fixed bug in PAGS that made any entity a member of a group with no tests.
-Bug 1506, Changed maxlengths in CGenericXSLT.cpd from 100 to 255 to match database column sizes.
-Bug 1507, Changed LocaleAwareXSLT so respect setting of locale_aware property.
-Bug 1509, Removed setting of legacy locale column in RDBMUserLayoutStore.
-Changed argument to RuntimeException constructor in PersonAttributesGroupStore to retain Java 1.3 compatibility.
-Fixed UserInstance's setting of authenticated variable passed to theme stylesheets.


Other changes:

-Added pluggable configuration ability to Person Attributes Groups Store.
-Enabled edit button in the channel definition for RSS portlet.
-Added DbConvert21 tool for upgrading a uPortal 2.1.x database for use with uPortal 2.2/2.3 code.
