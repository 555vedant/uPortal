uPortal 2.3.2 Distribution
--------------------------

Purpose
-------
This distribution is targeted towards
people who would like to install
uPortal in a development or production 
environment.  It contains uPortal source
code and properties files, but not a servlet
container, directory, or relational database, 
which are required.  Use of this distribution
requires knowledge of J2EE environments and the
Ant tool from the Apache Jakarta project.


Contents
--------
1) uPortal 2.3.2
2) uPortal 2.3.2 java libraries (Xalan, Pluto, etc).
3) uPortal Architecture overview and JavaDoc API
   (see docs directory)


System requirements
-------------------
JDK 1.3 or higher
JAVA_HOME environment variable must be set
Installation of Ant from Jakarta: 
  http://ant.apache.org/


Instructions
------------
Modify build.properties with local settings.

Use the following ant targets:

initportal - installs uPortal into a servlet container, 
             prepares a relational database with uPortal schema and data,
	     publishes channels and pushed layout fragments,
             deploys portlet applications
dist - creates JavaDoc, uPortal jar, and uPortal WAR files.

For descriptions of other Ant targets, 
see docs/uPortal_tools_overview.txt.

Make sure the database and servlet container are running and
access uPortal with http://localhost:8080/uPortal
Your URL may be different if you have configured a different port
and/or context name.

You can login to uPortal with the following user name/password 
combinations:

demo, demo
student, student
faculty, faculty
staff, staff
developer, developer

Each user may have a slightly different layout.


Notes 
-----
-Several properties files and one database table changed
 since uPortal 2.2.x.  If you are upgrading from this version,
 you will need to see to it that your properties files and
 database data are upgraded appropriately.  The difficulty
 of upgrading from 2.2.x to 2.3.x is expected to be much lower 
 than similar upgrades in past versions.

-uPortal does not strictly require the use of connection
 pooling, but it is highly recommended for production
 installations.  If your servlet container does not provide
 connection pooling, try something like Yet Another Poolman.  
 For information about Yet Another Poolman, 
 see http://yapoolman.sourceforge.net/.

-Bug fixes from 2.2.x releases have been implemented in 2.3.x
 whenever they were appropriate

-If you experience XML/XSLT-related errors, there is a good
 chance that your environment is not using the version of
 Xalan/Xerces that comes with this release. If you are using
 Tomcat, try copying the following files into Tomcat's
 common/endorsed directory: xalan.jar, xercesImpl.jar, xml-apis.jar.
 Alternatively, you can specify the use of these jar files
 via a java parameter when starting your servlet container:
  -Xbootclasspath/p:xalan.jar;xercesImpl.jar;xml-apis.jar
 For more information, see Version section of
 http://xml.apache.org/xalan-j/faq.html

Please report bugs and suggestions:

 http://www.uportal.org/bugzilla/

uPortal website:

 http://www.uportal.org


Changes since uPortal 2.3.1
---------------------------
Database:

-Bug 1563, Increased the size of various name and description columns:
  UP_FRAGMENTS.NAME (35 --> 128)
  UP_FRAGMENT_PARAM.PARAM_NAME (64 --> 128)
  UP_LAYOUT_STRUCT_AGGR.NAME (35 --> 128)
  UP_OWNER_FRAGMENT.FRAGMENT_NAME (64 --> 128)
  UP_OWNER_FRAGMENT.FRAGMENT_DESCRIPTION (128 --> 255)

-Bug 1569, Changed guest user's default layout ID, UP_USER.USER_DFLT_LAY_ID, from NULL to 1.


Properties:

-Added channel definition contentsubscriber.xml to properties/chanpub.
-Added channel definition skinselector.xml to properties/chanpub.


Bug fixes:

-Bug 1483, Logged the root exception in InitialSecurityContextFactory.
-Bug 1513, Allowed multi-valued attributes from JDBC source in PersonDirectory.
-Bug 1515, Added missing user information map to PortletRequest object.
-Bug 1516, Fixed the deletion of users in RDBMUserIdentityStore; removed user from all necessary tables.
-Bug 1522, Fixed use of PersonFactory within SimpleUserLayoutManagerTest so that it compiles.
-Bug 1524, Made sure portal starts when StatsRecorderFactory is missing.
-Bug 1525, Added ability for StatsRecorder to load a stats recorder factory from a CAR file.
-Bug 1529, Fixed ChannelDefinition which was confusing channel title and description.
-Bug 1532, Fixed RemoteUserPersonManager by not setting the username in IPerson.
-Bug 1534, Set BrowserInfo in ChannelServlet's ChannelRuntimeData.
-Bug 1536, Removed control characters from beginning of integratedModes.xsl stylesheets.
-Bug 1537, Changed PortalProperties to PropertiesManager in portal.properties comments.
-Bug 1542, Removed ALMigrationUtil and its README.txt and target.xml files.
-Bug 1543, Closed InputSteam in finally block in AuthorizationService.
-Bug 1544, Closed InputSteam in finally block in AuthorizationTester.
-Bug 1545, Closed InputSteam in finally block in CarClassLoader.
-Bug 1546, Closed InputSteam in finally block in CarResourceWorker.
-Bug 1547, Closed InputSteam in finally block in CGenericXSLT.
-Bug 1549, Closed InputSteam in finally block in ChannelPublisher.
-Bug 1551, Closed InputSteam in finally block in CSkinSelector.
-Bug 1552, Closed InputSteam in finally block in portlet Deployer.
-Bug 1553, Closed InputSteam in finally block in car DescriptorHandler.
-Bug 1555, Closed InputSteam in finally block in DownloadDispatchWorker.
-Bug 1557, Closed InputSteam in finally block in HttpProxyServlet.
-Bug 1558, Closed InputSteam in finally block in InitialSecurityContextFactory.
-Bug 1559, Closed InputSteam in finally block in LdapServices.
-Bug 1560, Closed InputSteam in finally block in ManageProfilesState.
-Bug 1561, Removed unused writeObject and readObject methods from ObjectIDImpl.
-Bug 1562, Closed InputSteam in finally block in RDBMServices.
-Bug 1563, (See database section above).
-Bug 1564, Added throw of RuntimeException in WebAppDtdResolver.
-Bug 1565, Closed InputSteam in finally block in URLUtils.
-Bug 1566, Closed InputSteam in finally block in TabColumnPrefsState.
-Bug 1567, Closed InputSteam in finally block in ResourceLoader.
-Bug 1568, Closed InputSteam in finally block in ReferenceAuthorization.
-Bug 1569, (See database section above).
-Bug 1571, Kept InputStream open when passed as a method argument in DocumentFactory.
Prevented NPE in PortalStateManager when the session is not valid.
Prevented NPE in AggregatedLayoutManager when setting channel description parameter value.
Improved performance within PortalDocumentImpl.


Other changes:

-Implemented java.io.Serializable in org.jasig.portal.container.om.portlet.ContentTypeImpl.
-Added new tool for converting to Aggregated Layouts and Integrated Modes: SimpleLayout2ALIM.
-Moved caching of DynamicInformationProvider from request attribute to local cache to avoid Tomcat NPE.
-Added CommonUtis.setNoCache() method.
-Removed throwing of SQLException when adding a duplicate query to RDBMServices.
-Changed CSessionLocalesSelector from an IPrivileged to a regular IChannel.

