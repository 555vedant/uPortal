<!DOCTYPE HTML PUBLIC "-//SoftQuad Software//DTD HoTMetaL PRO 6.0::19990601::extensions to HTML 4.0//EN" "hmpro6.dtd">
<HTML> 
<HEAD> 
<TITLE>Oracle database configuration</TITLE> 
<LINK HREF="../uportal.css" REL="stylesheet">

</HEAD> 
<BODY BGCOLOR="#FFFFFF"> 
<TABLE CELLSPACING="0" CELLPADDING="0" WIDTH="100%"> 
<TR> 
<TD ALIGN="LEFT" VALIGN="BOTTOM" COLSPAN="3"><IMG SRC="../images/uportal-head.gif" ALT="uPortal by JA-SIG" BORDER="0" HEIGHT="87" WIDTH="592"></TD> 
</TR> 
<TR> 
<TD><IMG SRC="../images/spacer.gif" ALT="." BORDER="0" HEIGHT="4" WIDTH="1"></TD> 
</TR> 
</TABLE>

<TABLE CELLSPACING="0" CELLPADDING="5" WIDTH="100%" BORDER="0"> 
   <TBODY> 
   <TR> 
   <TD VALIGN="TOP" WIDTH="150" BGCOLOR="#CCCCFF">
   <IMG SRC="../images/spacer.gif" BORDER="0" HEIGHT="4"><BR/>
   <P><A CLASS="sidelinks" HREF="http://www.ja-sig.org/" ><B> JA-SIG Home</B></A></P>
   <P><A CLASS="sidelinks"  HREF="../index.html" ><B> About uPortal</B></A></P>
   <P><A CLASS="sidelinks" HREF="../docs.html" ><B> Documentation</B></A></P>
   <P><A CLASS="sidelinks" HREF="../administrators/index.html" ><B> Getting Started</B></A></P>
   <P><A CLASS="sidelinks" HREF="../developers/index.html" ><B> Developers</B></A></P>
	<P><A CLASS="sidelinks" HREF="../implementors/index.html" ><B> Implementors</B></A></P>
	<P><A CLASS="sidelinks" HREF="../users/index.html" ><B> Users</b></A></P>
   <P><A CLASS="sidelinks" HREF="../architecture/index.html" ><B> Background</B></A></P>
   <P><A CLASS="sidelinks" HREF="../release/index.html" ><B> Release</B></A></P>
   <P><A CLASS="sidelinks" HREF="../meetings/index.html" ><B> Meetings</B></A></P>
   <P><IMG SRC="../images/mellon.gif" ALT="" BORDER="0" WIDTH="145" HEIGHT="93"></P> 
   </TD>

<!-- main body goes in this table cell -->
   <TD valign="top">
   <IMG HEIGHT="4" WIDTH="692" SRC="../images/orange-pixel.gif" BORDER="0" ALT=".">
   <h4 class="title"> <a name="top"></a> Setting up A Oracle Database</h4>
	
  <h5> About Oracle </h5>
  <p>Oracle is a commercial database available from <a href="http://www.oracle.com">
  http://www.oracle.com</a>
  </p>
  <h5> Obtaining the Driver </h5>
  
<p>A Oracle JDBC driver is also available through <a href="http://www.oracle.com"> 
http://www.oracle.com</a>. Versions for Oracle 8i and Oracle 9i are available. 
The driver downloads as a single &quot;<tt>zip</tt>&quot; file (for example, <tt>classes12.zip</tt>). 
The file should be stored in a directory where it will be accessible from the 
uPortal build environment (for example <tt>/usr/local/java/oracle/lib/classes12.zip</tt>)</p>
<p>See Issues section about possible issues using this driver.</p>

  <h5> Properties Configuration </h5>
  
<p>The uPortal build.properties  will need to be modifed. Find the property called 
<b>jdbcDriver</b> and change it to point to the Oracle zip/jar file, for example:</p>
<pre>jdbcDriver.jar=/usr/local/java/lib/classes12.zip
</pre>
<p>The uPortal <tt>rdbm.properties</tt> file (in the properties directory) will 
need to modified to specify the driver properties. First, comment out the property 
definitions which are currently defined (most likely, for HypersonicSQL). The 
<tt>rdbm.properties</tt> file contains several sample entries. Uncomment the lines 
for the Oracle database and make whatever changes necessary to match your local 
database installation, For example: </p>
<blockquote><tt>
##### Oracle - example<br>
jdbcDriver=oracle.jdbc.driver.OracleDriver<br>
jdbcUrl=jdbc:oracle:thin:@localhost:1521:uportal<br>
jdbcUser=test<br>
jdbcPassword=mypass
</tt></blockquote>
<p>The <tt>dbloader.xml</tt> properties file (also in the properties directory) 
may also need to be modified. This file is used by the DbLoader tool to create 
the uPortal database tables and populate the database. It contains several sample 
entries which create db-type-mappings for different databases. Find the tags for 
an Oracle database and modify the db-version, driver-name, and driver-version 
as necessary. For example: </p>
<blockquote><tt>
  &lt;db-type-mapping&gt;<br>
  &nbsp;&nbsp;&lt;db-name>Oracle&lt;/db-name&gt;<br>
  &nbsp;&nbsp;&lt;!-- Line break has to be here --&gt;<br>
  &nbsp;&nbsp;&lt;db-version>Oracle8 Enterprise Edition Release 8.0.6.2.0 - Production<br>
  &nbsp;&nbsp;PL/SQL Release 8.0.6.2.0 - Production&lt;/db-version&gt;<br>
  &nbsp;&nbsp;&lt;driver-name&gt;Oracle JDBC driver&lt;/driver-name&gt;<br>
  &nbsp;&nbsp;&lt;driver-version&gt;8.1.6.0.0&lt;/driver-version&gt;<br>
  &nbsp;&nbsp;&lt;type&gt;&lt;generic&gt;TIMESTAMP&lt;/generic&gt;&lt;local&gt;DATE&lt;/local&gt;&lt;/type&gt;<br>
  &nbsp;&nbsp;&lt;!-- map more types here --&gt;<br>
  &lt;/db-type-mapping&gt;

</tt></blockquote>
     
<p class="content"> The PersonDirs.xml file (also in the properties directory) 
may need to be modified; This file is used if the database is to be used to provide 
user directory information.</p>
   
<blockquote><tt>
    &lt;!-- JDBC Properties --&gt;<br>
&lt;driver&gt;oracle.jdbc.driver.OracleDriver&lt;/driver&gt;<br>
&lt;url&gt;jdbc:oracle:thin:@localhost:1521:uportal&lt;/url&gt;<br>
&lt;logonid&gt;test&lt;/logonid&gt;<br>
&lt;logonpassword&gt;mypass&lt;/logonpassword&gt;,<br>
    &lt;uidquery&gt;SELECT FIRST_NAME||' '||LAST_NAME AS FIRST_LAST,<br> 
	 FIRST_NAME, LAST_NAME, EMAIL FROM UP_PERSON_DIR WHERE USER_NAME=?&gt;&lt;/uidquery&gt;
</tt></blockquote>
<h5> Loading the Database </h5>
<p>Loading the database requires a couple of steps</p>
<ul>
   <li>Create the database: Refer to the Oracle database documentation for instructions
	regarding how to create an Oracle database instances.  The database name (or in this
	case, the Oracle SID), port number, and driver information must reflect what was defined
	in the rdbm.properties file</li>
	
<li>Create the tables and populate the database: From the uPortal build directory, 
run "<tt>ant db</tt>" to execute the ant target which loads the database. The 
ant target uses the Dbloader tool. </li>
	</ul>
  <h5> Issues and Known Bugs </h5>
   
<p>Some people have encountered problems with the Oracle JDBC driver with certain 
web application environments if the classes <tt>zip</tt> file is used as-is with 
the <tt>.zip</tt> file extension. Simply renaming the file to a <tt>.jar</tt> file 
seems to fix the problem. Alternatively, unzipping the classes file into a directory 
structure, then using the <tt>jar</tt> command to repackage the classes into a jar 
file works as well. 

   
   <IMG HEIGHT="4" WIDTH="692" SRC="../images/orange-pixel.gif" BORDER="0" ALT=".">
	
   </TD> 

</TR> 

</TBODY> 
</TABLE>

<!-- page footer -->
<TABLE CELLSPACING="0" CELLPADDING="0" WIDTH="100%"> 
   <TBODY> 
   <TR> 
   <TD ALIGN="CENTER">&nbsp;</TD> 
   </TR> 
   
   <TR> 
   <TD ALIGN="CENTER"><IMG HEIGHT="3" SRC="../images/spacer.gif" WIDTH="1"
   BORDER="0" ALT="."><BR><FONT FACE="Verdana, Arial, sans-serif"
   SIZE="1"><A HREF="http://www.ja-sig.org/">JA-SIG Home</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../index.html"> About uPortal</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../faq.html">FAQ</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../download.html">Download</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../docs.html">Documentation</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../getinv.html">Getting Involved</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <BR><A HREF="../cvs.html">Code Repository</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../bugs.html">Reporting Bugs</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../license.html">License</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   </FONT></TD> 
   </TR> 
   </TBODY> 
</TABLE><!-- end page footer -->
</BODY>
</HTML>
