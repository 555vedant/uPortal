<!DOCTYPE HTML PUBLIC "-//SoftQuad Software//DTD HoTMetaL PRO 6.0::19990601::extensions to HTML 4.0//EN" "hmpro6.dtd">
<HTML> 
<HEAD> 
<TITLE>DbLoader/DbUnload</TITLE> 
<LINK HREF="../uportal.css" REL="stylesheet">

</HEAD> 
<BODY BGCOLOR="#FFFFFF"> 
<TABLE CELLSPACING="0" CELLPADDING="0" WIDTH="100%"> 
<TR> 
<TD ALIGN="LEFT" VALIGN="BOTTOM" COLSPAN="3"><IMG SRC="../images/uportal-head.gif" ALT="uPortal by JA-SIG" BORDER="0" HEIGHT="87" WIDTH="592"></TD> 
</TR> 
<TR> 
<TD><IMG SRC="../images/spacer.gif" ALT="." BORDER="0" HEIGHT="4" WIDTH="1"></TD> 
</TR> 
</TABLE>

<TABLE CELLSPACING="0" CELLPADDING="5" WIDTH="100%" BORDER="0"> 
   <TBODY> 
   <TR> 
   <TD VALIGN="TOP" WIDTH="150" BGCOLOR="#CCCCFF">
   <IMG SRC="../images/spacer.gif" BORDER="0" HEIGHT="4"><BR/>
   <P><A CLASS="sidelinks" HREF="http://www.ja-sig.org/" ><B> JA-SIG Home</B></A></P>
   <P><A CLASS="sidelinks"  HREF="../index.html" ><B> About uPortal</B></A></P>
   <P><A CLASS="sidelinks" HREF="../docs.html" ><B> Documentation</B></A></P>
   <P><A CLASS="sidelinks" HREF="../administrators/index.html" ><B> Getting Started</B></A></P>
   <P><A CLASS="sidelinks" HREF="../developers/index.html" ><B> Developers</B></A></P>
	<P><A CLASS="sidelinks" HREF="../implementors/index.html" ><B> Implementors</B></A></P>
	<P><A CLASS="sidelinks" HREF="../users/index.html" ><B> Users</b></A></P>
   <P><A CLASS="sidelinks" HREF="../architecture/index.html" ><B> Background</B></A></P>
   <P><A CLASS="sidelinks" HREF="../release/index.html" ><B> Release</B></A></P>
   <P><A CLASS="sidelinks" HREF="../minutes/index.html" ><B> Meeting Minutes</B></A></P>
   <P><IMG SRC="../images/mellon.gif" ALT="" BORDER="0" WIDTH="145" HEIGHT="93"></P> 
   </TD>

<!-- main body goes in this table cell -->
   <TD valign="top">
   <IMG HEIGHT="4" WIDTH="692" SRC="../images/orange-pixel.gif" BORDER="0" ALT=".">
   <h3>Dbloader/DbUnload database management tools</h3>
	<h5>DbLoader</h5>
    <p>The reference implementation of uPortal's data storage interfaces requires a relational 
    database. uPortal provides a tool, DbLoader, to load a relational database with 
    the required uPortal tables and sample data.
	 </p>
	 <p>DbLoader performs the following tasks:</p>
	 <ol> 
    
    <li>Reads in <a href="../implementors/tables.xml.html">properties/tables.xml</a> 
file to determine the database schema </li>
	 <li>Deletes existing tables specified in tables.xml.</li> 
	 <li>Creates the tables specified in tables.xml.</li> 
    
    <li>Reads in <a href="../implementors/data.xml.html">properties/data.xml</a> file 
to determine sample data.</li> 
	 <li>Inserts data from data.xml into the newly created tables.</li> 
	 <li>Creates a database script containing all the SQL statements previously executed.</li> 
	 </ol>
	 
<p>DbLoader can be configured by modifying <a href="../implementors/dbloader.xml.html">properties/dbloader.xml</a>. 
Because DbLoader relies on database metadata supplied by a JDBC driver, it may 
be necessary (for some combinations of drivers and databases) to supply a datatype 
mapping inside dbloader.xml. If this is necessary, DbLoader will print an error 
message with instructions. </p> 

<p>To run DbLoader, type "ant db" from the uPortal base directory.</p>
 
<p>The "db" target accepts command line arguments which override values read from 
the dbloader.xml file.
</p>
<p>The "db" target can be invoked thusly: </p>
<p>To use /properties/mytables.xml instead 
of the tables file specified in dbloader.xml:</p>
<code> ant db -Dusetable=-t -Dtablefile=/properties/mytables.xml </code>
<p>To use /properties/mydata.xml instead of the data file specified in dbloader.xml:</p> 
<code>ant db -Dusedata=-d -Ddatafile=/properties/mydata.xml 
</code>
<p>Note: the tables and data 
files can both be overridden by combining the arguments. The usetable and tablefile 
must be used in tandem and sequentially on the command line. Similarly, usedata 
and datafile must but used in tandem. </p>

<p>Addtionally, several other boolean flags may be overridden.<p>

  <p>To set createScript=true</p>
  <code>ant db -Dcreatescript=-c</code>

  <p>To set createScript=false</p>
  <code>ant db -Dcreatescript=-nc</code>

  <p>To set dropTables=true</p>
  <code>ant db -Ddroptables=-D</code>

  <p>To set dropTables=false</p>
  <code>ant db -Ddroptables=-nD</code>

  <p>To set createTables=true</p>
  <code>ant db -Dcreatetables=-C</code>

  <p>To set createTables=false</p>
  <code>ant db -Dcreatetables=-nC</code>

  <p>To set populateTables=true</p>
  <code>ant db -Dpopulatetables=-P</code>

  <p>To set populateTables=false</p>
  <code>ant db -Dpopulatetables=-nP</code>

  <p>The -c, -nc, -D, -nD, -C, -nC, -P, -nP arguements may all be used
  independantly or in any combination although it would not make sense to,
  for example, use both -c and -nc.</p>

<h5>DbUnload </h5>
<p> DbUnload, can read an existing database table and serialize it 
into an xml file similar to tables.xml. This file can then be used in place of 
tables.xml to load another database. </p>
<p> To run this target, you must specify the table name and output file parameters<br>
on the command line. For example:</p>
<code> ant dbunload -Dtablename=up_channel -Dxmlfile=mytables.xml</code> 
<p>&nbsp;</p>
<IMG HEIGHT="4" WIDTH="692" SRC="../images/orange-pixel.gif" BORDER="0" ALT="."> 

</TD> 

</TR> 

</TBODY> 
</TABLE>

<!-- page footer -->
<TABLE CELLSPACING="0" CELLPADDING="0" WIDTH="100%"> 
   <TBODY> 
   <TR> 
   <TD ALIGN="CENTER">&nbsp;</TD> 
   </TR> 
   
   <TR> 
   <TD ALIGN="CENTER"><IMG HEIGHT="3" SRC="../images/spacer.gif" WIDTH="1"
   BORDER="0" ALT="."><BR><FONT FACE="Verdana, Arial, sans-serif"
   SIZE="1"><A HREF="http://www.ja-sig.org/">JA-SIG Home</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../index.html"> About uPortal</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../faq.html">FAQ</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../download.html">Download</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../docs.html">Documentation</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../getinv.html">Getting Involved</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <BR><A HREF="../cvs.html">Code Repository</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../bugs.html">Reporting Bugs</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   <A HREF="../license.html">License</A>
   <IMG HEIGHT="13" ALT="*" SRC="../images/diamond-lo.gif" WIDTH="8" BORDER="0">
   </FONT></TD> 
   </TR> 
   </TBODY> 
</TABLE><!-- end page footer -->
</BODY>
</HTML>
