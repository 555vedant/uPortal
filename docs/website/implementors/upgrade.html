<html>
<head>
  <title>Upgrading uPortal</title>
  <link href="../uportal.css" rel="stylesheet">
</head>
<body style="background-color: rgb(255, 255, 255);">
<table cellspacing="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td align="left" valign="bottom" colspan="3"><img
 src="../images/uportal-head.gif" alt="uPortal by JA-SIG" border="0"
 height="87" width="592"></td>
    </tr>
    <tr>
      <td><img src="../images/spacer.gif" alt="." border="0" height="4"
 width="1"></td>
    </tr>
  </tbody>
</table>
<table cellspacing="0" cellpadding="5" width="100%" border="0">
  <tbody>
    <tr>
      <td valign="top" width="150" bgcolor="#ccccff"> <img
 src="../images/spacer.gif" border="0" height="4"><br>
      <p><a class="sidelinks" href="http://www.ja-sig.org/"><b> JA-SIG
Home</b></a></p>
      <p><a class="sidelinks" href="../index.html"><b> About uPortal</b></a></p>
      <p><a class="sidelinks" href="../docs.html"><b> Documentation</b></a></p>
      <p><a class="sidelinks" href="../administrators/index.html"><b>Getting
Started</b></a></p>
      <p><a class="sidelinks" href="../developers/index.html"><b>Developers</b></a></p>
      <p><a class="sidelinks" href="index.html"><b> Implementors</b></a></p>
      <p><a class="sidelinks" href="../users/index.html"><b> Users</b></a></p>
      <p><a class="sidelinks" href="../architecture/index.html"><b>Background</b></a></p>
      <p><a class="sidelinks" href="../release/index.html"><b> Release</b></a></p>
      <p><img src="../images/mellon.gif" alt="" border="0" width="145"
 height="93"></p>
      </td>
<!-- main body goes in this table cell --> <td valign="top"> <img
 height="4" width="692" src="../images/orange-pixel.gif" border="0"
 alt=".">
      <h2>Upgrading uPortal</h2>
      <h3>Upgrading 2.1 to 2.3 with Aggregated Layouts</h3>
      A set of tools and a build script have been created in order to facilitate the upgrading
      from a 2.1.x installation with simple layouts to a 2.3.x installation with Aggregated
      Layouts.  At this point, the upgrade process results in the loss of all user layout data.
      The upgrade tools are available with the 2.3.4 release of uPortal and higher.
      <p/>
      In order to upgrade, you need to take note of several pieces of information about your
      current uPortal 2.1 installation:
      <ul>
       <li>If you have customized the template users, you should be aware of the highest
       USER_ID (in the UP_USER) table of a template user.  In the default installation, the
       highest ID is 13 for the <code>student</code> user.
       <li>You should be aware of the default structure and themes that your users are using.
       For example, in the default installation the structure is Tabs and Columns and the
       theme is Nested Tables.
      </ul>
      <p/>
      Once you have gathered the necessary information, you can start the upgrade process:
      <ol>
       <li>Before you begin, you should stop your portal instance and any other processes
       that access the database.  <b>You should also make sure you have a good backup of
       your database, in case there are any problems.</b></li>
       <li>Download and unzip the latest uPortal 2.3 distribution.</li>
       <li>Modify <code>properties/rdbm.properties</code> and <code>build.properties</code>
       to connect to your database.  You can use the <code>ant dbtest</code> target to test
       your database connection.</li>
       <li>Modify <code>properties/al/pushfragments.xml</code> to customize the pushed
       fragments that will be installed in your database.  If you don't do this, you will
       get a default set of fragments, which you probably don't want in your production database.</li>
       <li>Run the upgrade script with <code>ant -f upgrade21.xml</code>.  You will be
       prompted to provide some of the information you gathered prior to starting the upgrade
       process.</li>
       <li>Customize any other properties of the portal and deploy it.</li>
       <li>Start the portal.</li>
      </ol>
     </td>
    </tr>
  </tbody>
</table>
<!-- page footer -->
<table cellspacing="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td align="center">&nbsp;</td>
    </tr>
    <tr>
      <td align="center"><img height="3" src="../images/spacer.gif"
 width="1" border="0" alt="."><br>
      <font face="Verdana, Arial, sans-serif" size="1"><a
 href="http://www.ja-sig.org/">JA-SIG Home</a> <img height="13" alt="*"
 src="../images/diamond-lo.gif" width="8" border="0"> <a
 href="../index.html"> About uPortal</a> <img height="13" alt="*"
 src="../images/diamond-lo.gif" width="8" border="0"> <a
 href="../faq.html">FAQ</a> <img height="13" alt="*"
 src="../images/diamond-lo.gif" width="8" border="0"> <a
 href="../download.html">Download</a> <img height="13" alt="*"
 src="../images/diamond-lo.gif" width="8" border="0"> <a
 href="../docs.html">Documentation</a> <img height="13" alt="*"
 src="../images/diamond-lo.gif" width="8" border="0"> <a
 href="../getinv.html">Getting Involved</a> <img height="13" alt="*"
 src="../images/diamond-lo.gif" width="8" border="0"> <br>
      <a href="../cvs.html">Code Repository</a> <img height="13"
 alt="*" src="../images/diamond-lo.gif" width="8" border="0"> <a
 href="../bugs.html">Reporting Bugs</a> <img height="13" alt="*"
 src="../images/diamond-lo.gif" width="8" border="0"> <a
 href="../license.html">License</a> <img height="13" alt="*"
 src="../images/diamond-lo.gif" width="8" border="0"> </font></td>
    </tr>
  </tbody>
</table>
<!-- end page footer -->
</body>
</html>
