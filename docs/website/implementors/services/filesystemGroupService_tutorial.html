<!DOCTYPE HTML PUBLIC "-//SoftQuad Software//DTD HoTMetaL PRO 6.0::19990601::extensions to HTML 4.0//EN" "hmpro6.dtd">
<html>
<head>
  <title>Filesystem Group Service Tutorial</title>
  <link href="../../uportal.css" rel="stylesheet">
</head>
<body style="background-color: rgb(255, 255, 255);">
<table cellspacing="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td align="left" valign="bottom" colspan="3"><img
 src="../../images/uportal-head.gif" alt="uPortal by JA-SIG" border="0"
 height="87" width="592"> </td>
    </tr>
    <tr>
      <td><img src="../../images/spacer.gif" alt="." border="0"
 height="4" width="1"> </td>
    </tr>
  </tbody>
</table>
<table cellspacing="0" cellpadding="5" width="100%" border="0">
  <tbody>
    <tr>
      <td valign="top" width="150" bgcolor="#ccccff"> <img
 src="../../images/spacer.gif" border="0" height="4"> <br>
      <p><a class="sidelinks" href="http://www.ja-sig.org/"><b> JA-SIG
Home</b></a></p>
      <p><a class="sidelinks" href="../../index.html"><b> About uPortal</b></a></p>
      <p><a class="sidelinks" href="../../docs.html"><b> Documentation</b></a></p>
      <p><a class="sidelinks" href="../../administrators/index.html"><b>
Getting Started</b></a></p>
      <p><a class="sidelinks" href="../../developers/index.html"><b>
Developers</b></a></p>
	
      <p><a class="sidelinks" href="../index.html"><b> Implementors</b></a></p>
	
      <p><a class="sidelinks" href="../../users/index.html"><b> Users</b></a></p>
      <p><a class="sidelinks" href="../../architecture/index.html"><b>
Background</b></a></p>
      <p><a class="sidelinks" href="../../release/index.html"><b> Release</b></a></p>
      <p><img src="../../images/mellon.gif" alt="" border="0"
 width="145" height="93"> </p>
      </td>
<!-- main body goes in this table cell  (see BELOW)   --> <td
 valign="top"> <img height="4" width="692"
 src="../../images/orange-pixel.gif" border="0" alt="."> <a =""><!-- TO CHANGE: main body goes HERE <<<<<<<<<<<<<<<<<< --><!-- start cut this section to put into jasig table cell format --> </a>
      <div align="center"> <a =""> </a>
      <h2><a ="">Filesystem Group Service Tutorial</a></h2>
      <a =""> </a></div>
      <a =""> <br>
      </a>
      <p><span style="font-style: italic;"><a ="">Prerequisites: </a></span><a
 ="">You should be able to edit groups with the <span
 style="font-style: italic;">Groups Manager</span> channel and know how
to publish a channel using the <span style="font-style: italic;">Channel
Manager</span> channel.</a></p>
      <a ="">This tutorial assumes a base distribution, like the
Quick-start, of uPortal version 2.2 or greater.  However, it should
work with a locally configured instance of uPortal if you substitute
the names of your own users for the sample names.&nbsp; The
instructions assume Windows, but the Mac and Unix substitutions are
pretty obvious.&nbsp; <br>
      </a>
      <p></p>
      <a =""> </a>
      <ol>
        <a =""> <li>Create a directory called <code>C:\temp\myGroups\org.jasig.portal.security.IPerson</code>.<br>
In this directory, using a text editor like Notepad, create a new file
named <code>Special_Developers</code> (not <code>Special_Developers.txt).&nbsp;</code>Add
the following 2 lines containing names of portal users:</li>
        </a>
      </ol>
      <a =""> </a>
      <p style="margin-left: 40px;"><a =""><small><code>student<br>
faculty</code></small><br>
      </a></p>
      <a =""> </a>
      <p style="margin-left: 40px;"><a ="">Save the file<code></code>.&nbsp;
You have now created a group called <code>Special_Developers</code>
that contains 2 members, <code>student</code> and <code>faculty</code>.&nbsp;<br>
      </a></p>
      <a =""> </a>
      <ol start="2">
        <a =""> <li>Edit your composite groups configuration file, <code>properties/groups/compositeGroupServices.xml</code>
and comment <span style="font-style: italic;">in </span>the filesystem
group service.&nbsp; Change the groups root attribute to <code>"C:/temp/myGroups"</code>.</li>
        </a>
      </ol>
      <a =""> </a>
      <p style="margin-left: 40px;"><a ="">&nbsp; <small>&lt;service
groupsRoot=<span style="font-weight: bold;">"C:/temp/myGroups</span>"&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;name&gt;<span style="font-weight: bold;">filesystem</span>&lt;/name&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;service_factory&gt;org.jasig.portal.groups.ReferenceIndividualGroupServiceFactory&lt;/service_factory&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;entity_store_factory&gt;org.jasig.portal.groups.filesystem.FileSystemGroupStoreFactory&lt;/entity_store_factory&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;group_store_factory&gt;org.jasig.portal.groups.filesystem.FileSystemGroupStoreFactory&lt;/group_store_factory&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;entity_searcher_factory&gt;org.jasig.portal.groups.filesystem.FileSystemEntitySearcherFactory&lt;/entity_searcher_factory&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;internally_managed&gt;false&lt;/internally_managed&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;caching_enabled&gt;false&lt;/caching_enabled&gt;<br>
&nbsp; &lt;/service&gt;<br>
      </small></a></p>
      <a =""> </a>
      <p style="margin-left: 40px;"><a ="">Save your changes.  You have
now made the group you just created available to the composite group
service via a component service named <code>filesystem</code>. </a></p>
      <a =""> </a>
      <ol start="3">
        <a =""> </a>
        <p></p>
        <li><a ="">Start up your portal.</a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Log on as <code>student</code>.&nbsp; You should <span
 style="font-weight: bold;">not</span> see the <span
 style="font-style: italic;">Channel Admin</span> link in the header
since <code>student</code> does not have permission to render the <span
 style="font-style: italic;">Channel Manager </span>channel.
&nbsp;Logout <code>Student</code>.<br>
          </a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Logon as <code>admin</code>. &nbsp;&nbsp;In <span
 style="font-style: italic;">Groups Manager</span> (on the Admin Tools
tab), expand <code>Everyone</code>, expand <code>Staff</code>, and
select <code>Developers</code>&nbsp;&nbsp; (You are going to make <code>Special_Developers</code>
a member of <code>Developers</code>.)&nbsp;<br>
          </a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><span style="font-style: italic;"><a ="">Lock</a></span><a
 =""> <code>Developers</code> for update and choose <span
 style="font-style: italic;">Add Members</span>.&nbsp;&nbsp;</a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><span style="font-style: italic;"><a ="">Search</a></span><a
 =""> for a Group of Persons containing "Special".&nbsp; <span
 style="font-style: italic;">Groups Manager</span> should find your new
group.&nbsp; Select <code>Special_Developers</code> and add it to <code>Developers</code>.&nbsp;<br>
          </a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><span style="font-style: italic;"><a ="">Unlock</a></span><a
 =""> <code>Developers</code> and select <code>Special_Developers</code>.&nbsp;
It should have 2 members, Faculty User and Student User.&nbsp; <br>
          </a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Still logged on as <code>admin</code>, publish a
new channel, giving access only to the group <code>Special_Developers</code>.&nbsp;
Logout <code>admin</code>.&nbsp; <br>
          </a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Log on as <code>student</code>.&nbsp; You should
now see the <span style="font-style: italic;">Channel Admin</span> link
in the header and be able to publish channels since members of <code>Developers</code>
have permission to render <span style="font-style: italic;">Channel
Manager</span> and <code>student</code> is now a member of <code>Developers</code>
via <code>Special_Developers</code>.&nbsp;&nbsp;</a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Subscribe to the new channel via the <span
 style="font-style: italic;">User Preferences</span> channel.&nbsp; <br>
          </a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Log off <code>student</code> and log on as <code>developer</code>.&nbsp;<br>
          </a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Try to subscribe to the new channel via the <span
 style="font-style: italic;">User Preferences</span> channel.&nbsp; You
should <span style="font-weight: bold;">not</span> be able to see the
new channel.&nbsp; Both <code>developer</code> and <code>Special_Developers</code>
are members of <code>Developers</code>, but only members of <code>Special_Developers</code>
have subscribe permission for the new channel.&nbsp;&nbsp;<br>
          </a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Log off <code>developer</code> and log on as <code>faculty</code>.&nbsp;
You should now be able to subscribe to the new channel.&nbsp; Do so.</a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Using your text editor, edit <code>Special_Developers</code>
and remove <code>faculty</code> from the group by commenting out the <code>faculty</code>
line:<br>
          </a></li>
        <a =""> </a>
      </ol>
      <a =""> </a>
      <p style="margin-left: 40px;"><a =""><small><code>student<br>
#faculty<br>
      </code></small></a></p>
      <a =""> </a>
      <ol start="16">
        <a =""> </a>
        <p></p>
        <li><a ="">Still logged on as <code>faculty</code>, refresh
your browser.&nbsp; The new channel should still successfully
render.&nbsp; Why? &nbsp; Although <code>faculty</code> is no longer a
member of <code>Special_Developers,</code>the filesystem group service
is externally-managed (you edited it with a text editor).  While the
filesystem service itself stays up-to-date by checking file timestamps,
it has no way of knowing what has changed or that previously-cached
membership information for a particular group member is now out of
sync. &nbsp; </a></li>
        <p></p>
        <p></p>
        <li><a ="">On the other hand, if you remove <code>Special_Developers</code>
from <code>Developers</code> using <span style="font-style: italic;">Groups
Manager</span>, this change will be visible in real time because <code>Developers</code>
belongs to an internally-managed service.&nbsp; As soon as you refresh <code>faculty's</code>
browser, the <span style="font-style: italic;">Channel Admin</span> link
will disappear from the header. &nbsp; You'll need 2 different user
agents (browser types) on your workstation to try this, one for <code>faculty</code>
and one for <code>admin</code> to make the change in <span
 style="font-style: italic;">Groups Manager</span>.) &nbsp;<code> </code></a></li>
        <p></p>
        <a =""> </a>
        <p></p>
        <li><a ="">Log off <code></code>and log on once again as <code>faculty.</code>This
time, the new channel should fail to render, and the <span
 style="font-style: italic;">Error Channel</span> should appear in its
place with the annoying "You are not authorized to view this channel"
message.&nbsp; The <span style="font-style: italic;">Channel Admin</span>
link should also be gone from the header.&nbsp; The memberships for <code>faculty</code>
are now correctly assessed because membership information for a user is
un-cached when the user's session is destroyed. &nbsp; </a></li>
        <p></p>
        <a =""> </a>
      </ol>
<!-- end cut this section to put into jasig table cell format --><a =""> <br>
<!-- end of main body table cell --> <img height="4" width="692"
 src="../../images/orange-pixel.gif" border="0" alt="."> 	 </a></td>
    </tr>
  </tbody>
</table>
<!-- page footer -->
<table cellspacing="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td align="center">&nbsp;</td>
    </tr>
    <tr>
      <td align="center"><img height="3" src="../../images/spacer.gif"
 width="1" border="0" alt="."> <br>
      <font face="Verdana, Arial, sans-serif" size="1"><a
 href="http://www.ja-sig.org/">JA-SIG Home</a> <img height="13" alt="*"
 src="../../images/diamond-lo.gif" width="8" border="0"> <a
 href="../../index.html"> About uPortal</a> <img height="13" alt="*"
 src="../../images/diamond-lo.gif" width="8" border="0"> <a
 href="../../faq.html">FAQ</a> <img height="13" alt="*"
 src="../../images/diamond-lo.gif" width="8" border="0"> <a
 href="../download.html">Download</a> <img height="13" alt="*"
 src="../../images/diamond-lo.gif" width="8" border="0"> <a
 href="../../docs.html">Documentation</a> <img height="13" alt="*"
 src="../../images/diamond-lo.gif" width="8" border="0"> <a
 href="../../getinv.html">Getting Involved</a> <img height="13" alt="*"
 src="../../images/diamond-lo.gif" width="8" border="0"> <br>
      <a href="../../cvs.html">Code Repository</a> <img height="13"
 alt="*" src="../../images/diamond-lo.gif" width="8" border="0"> <a
 href="../../bugs.html">Reporting Bugs</a> <img height="13" alt="*"
 src="../../images/diamond-lo.gif" width="8" border="0"> <a
 href="../../license.html">License</a> <img height="13" alt="*"
 src="../../images/diamond-lo.gif" width="8" border="0"> </font></td>
    </tr>
  </tbody>
</table>
<!-- end page footer --> <br>
<br>
<br>
<br>
<br>
</body>
</html>
