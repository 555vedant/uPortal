<project name="layout tools" basedir=".">

    <property name="build.home" value="build"/>

    <target name="export_layout" description="Invoke layout export for the user specified by the 'username' system property.">

        <!-- Delete the file if it currently exists -->
        <delete file="${username}.xml" />

        <!-- Add layouts somehow -->
        <java fork="true" failonerror="true" dir="" classname="org.jasig.portal.layout.dlm.publisher.DlmLayoutExporter">
            <classpath>
                <pathelement path="${build.home}/WEB-INF/classes" />
                <fileset dir="lib">
                    <include name="*.jar" />
                </fileset>
                <fileset dir="lib/cache">
                    <include name="*.jar" />
                </fileset>
                <fileset dir="lib/jaxp">
                    <include name="*.jar" />
                </fileset>
                <fileset dir="lib/portlets">
                    <include name="*.jar" />
                </fileset>
            </classpath>
            <arg value="${username}" />
            <arg value="${username}.xml" />
        </java>

    </target>

    <target name="publish_layout" description="Publish the layout at the path specified by the 'layout' system property.">

        <!-- Add layouts somehow -->
        <java fork="true" failonerror="true" dir="" classname="org.jasig.portal.layout.dlm.publisher.DlmLayoutPublisher">
            <classpath>
                <pathelement path="${build.home}/WEB-INF/classes" />
                <fileset dir="lib">
                    <include name="*.jar" />
                </fileset>
                <fileset dir="lib/cache">
                    <include name="*.jar" />
                </fileset>
                <fileset dir="lib/jaxp">
                    <include name="*.jar" />
                </fileset>
                <fileset dir="lib/portlets">
                    <include name="*.jar" />
                </fileset>
            </classpath>
            <arg value="${layout}" />
        </java>

    </target>

</project>
